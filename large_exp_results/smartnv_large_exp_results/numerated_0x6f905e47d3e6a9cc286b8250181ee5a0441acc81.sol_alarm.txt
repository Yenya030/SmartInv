The contract you provided is vulnerable to:
1) Inconsistent state update
2) Arithmetic flaw