Potential vulnerabilities in the contract:

1) Atomicity violation
2) Inconsistent state update