1 /**
2 “The best view always comes after the hardest climb.” - ATH INCOMING 
3 
4 Website:   https://athincoming.com 
5 Telegram:  https://t.me/athincoming
6 
7       ░█████╗░████████╗██╗░░██╗  ██╗███╗░░██╗░█████╗░░█████╗░███╗░░░███╗██╗███╗░░██╗░██████╗░
8       ██╔══██╗╚══██╔══╝██║░░██║  ██║████╗░██║██╔══██╗██╔══██╗████╗░████║██║████╗░██║██╔════╝░
9       ███████║░░░██║░░░███████║  ██║██╔██╗██║██║░░╚═╝██║░░██║██╔████╔██║██║██╔██╗██║██║░░██╗░
10       ██╔══██║░░░██║░░░██╔══██║  ██║██║╚████║██║░░██╗██║░░██║██║╚██╔╝██║██║██║╚████║██║░░╚██╗
11       ██║░░██║░░░██║░░░██║░░██║  ██║██║░╚███║╚█████╔╝╚█████╔╝██║░╚═╝░██║██║██║░╚███║╚██████╔╝
12       ╚═╝░░╚═╝░░░╚═╝░░░╚═╝░░╚═╝  ╚═╝╚═╝░░╚══╝░╚════╝░░╚════╝░╚═╝░░░░░╚═╝╚═╝╚═╝░░╚══╝░╚═════╝░
13 
14 c:::,,,:;,,,,,;;;;;;;;;,,,,,,,,,,,,,,,,,,,;c:;,,,,,,,,,,,,;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:,,,,,,;;;
15 cllc:;,,,,,,,;,,;;;;;,,,,,,,,,,,,,,,,,'','.;dOkxdooo:,,,,,,,,,;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:,,;;
16 c:;,,,,,;,,;;;;;,,,,,,,,,,,,,,,,,,,,''':dc...;lx0KKKOo;,,,,;;;;;;;;;;;;;;;;;;,,;;;;;;;;;;;;;;,,,,;:l
17 ,,,,,,,,,,,;;;;;,,,,,,,,,,,,,,,,,,''''cO0o;....'d0KKK0kdc:;;;;;;;;,,,,,;;;;;,,,,,,;;;;;;;,,,,,,,,;;:
18 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,''''ckxc;'','..,dO0KKKK0ko:;,,,,,,,,,,,,,,,,,,,,,,,,,,;,,,,,,,,,::c
19 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,''''.,dOdooc;;,...,:d0KKKKK0kdc;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;
20 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,'''..,l:,;'..,::;'..cOK0KKKK00kl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;;,,,,;,
21 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,'''''.........:oO0OxlclkK0KKKKKK0Od:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;:;
22 ,,,,,,,,,,,,,,,,,,,,,,,,,,,''''''.';ll;';ldddxOxl:::o000KKKKKKK0kl;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
23 ,,,,,,,,,,,,,,,,,,,,,,,,,,'''''',col,.,xOd;,cddc,,,,:xOddO0KKKKKK0o:;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,:
24 ,,,,,,,,,,,,,,,,,,,,,,,,,''''',lOOl'':xkolokko:,;ccc;cOxldOKKKKKKK0kc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
25 ,,,,,,,,,,,,,,,,,,,,,,,,'''''.cdclddO00Okxl;..';cccc;;d0000KKKKK0KK0xc;,,,,,,,,,,,,,,,,,,,,,,,,,,,,o
26 ,,,,,,,,,,,,,,,,,,,,,,,'''''.;dc':ok00Oo;...;oxOOxoc,,:k0KKKKKKKKKKK0kl:;,,,,,,,,,,,,,,,,,,,,;;,,,,,
27 ,,,,,,,,,,,,,,,,,,,,,'''''''.cko::dOd:'..':dkOkkdl::clldOK0KKKKK0KKKK0x:;,,,;;;,,,,,,,,,,,,,,;;;;;,c
28 ,,,,,,,,,,,,,,,,,,,,''''''',lkOocd0k;.';clol:,'.,;,...'coollllodxk00KK0o,,,,,,;;,,,,,,,,,,,,,;;;;;;:
29 ,,,,,,,,,,,,,,,,,,,'''''''.cOK00K00koloolc;.....;k0x;..;;...;oxxxkO0KK0d,',,,,,,,,,,,,,,,,,,,;;;;;,:
30 ,,,,,,,,,,,,,,,,,,'''''''''cxk00OdlxOdl:'.......,dkOd,;,....'lkO00KKKK0d,''',,,,,,,,,,,,,,,,,,;;;;,:
31 ,,,,,,,,,,,,,,,,,,'''''''.':ok0k:.:ddo;...........'ckkd;....,ldxk0000K00x:'''',,,,,,,,,,,,,,,,,,,;,:
32 ,,,,,,,,,,,,,,,,'''''''.':ox000x;;cdOo..::.....,;;;:dOxo:;;;:x00KK0xloodOOxo;''',,,,,,,,,,,,,,,,,;,:
33 ,,,,,,,,,,,,,,''''''''';oOK0kdc,:loxx:...'....':lxkO0xoxkxxdco0KKKK0dl,.;ok0kl:,'',,,,,,,,,,,,,,,,,:
34 ',,,,,,,,',,''''''''';okkkkkko:oolocc;.....;,....,;oOddxkkkxkO00KK0KKKOc..ck000xc'',,,,,,,,,,,,,,,,:
35 ',,,,,,''''''''''';lxO000000K0Od:,''ox,...;do'..,;:cooxdcckKK00KKKK000KOc..;oO0Kx;''',,,,,,,,,,,,,,;
36 '''''''''''''''.,lk0K0K000K00Odc'...:oc:loxOOxo:.....;lkd;cOK00KKKK00KK0Odc''lOKOdllc;''''',,,,,,,,:
37 '''''''''''''':oollk00K000OOkoc,...'lkO000K0OO0Odllcc;;cdc;x00KKKKK000OkOKOc.'cO0KKK0kdollc;,,,,,,,:
38 '''''''''''';oO0kklo0K000kxxdc,...'l00000OkOOkkkkdllc::oo:;cOK00KKK000d:d00kocok00K000KKK00koc:,,,,;
39 ''''''''''':k00Oo:;cdddxxxO0d;...;lkOxxkkkO000Oko,.,;lxxc;cdO00K0KK0KOd:ck00000000KK0K00K0000kdc;,,,
40 ''''''''''ck000x;..,:;:okO00d;...:oOkxO0KK000OOOxxkkxl:,;ok0kox000K0K0xoooxk000K000K00Odok0000kko,,,
41 ''''''''.:kK0000o......;dO00d,..,lx0Ok0KKK000OkO000x:'.';ldOOdld000K000kxxdlk00K000K000d;;oxk00Ox:,,
42 '''''''''cOK000O:......cO000x,..'cx0Ok0K0KK000O000Od:;,''';d0koldxk00000kkkdok000000KK00x:,,;cdxxo:,
43 '''''''.;xK000ko:.....lO0xx0x,.'ckkkkkO00KK00KK000Kkoc:;:lx000Oxdook0000OkOOxox000000K000kl;,',:ldol
44 ''''''.;x0K00kxOk;.coxOkc,oOo;cxO00OOkxkO0OOO000OkxdddoccdxloO00K0OO000K0OkkOxdxkOkdxk0000Oxl:;;;cox
45 ''''';lk00000000Oxx000k;.;k0kcoO0000000OOOkxOOxoc:cloooc;;,.cO00K00K0KK0kkxxkOOkodxdoldO00000xc,,;:o
46 ''''lO0KKKKKK00K00000x;..;x00xcok000K000000Oo;'',:clc;:c:,',d00000KK00K0kdoodxxxxdddxdddxkO000Oo;,,c
47 .''lkkoooollok0KK00xc'..,oO00Ol,,:x00000K00Od:coxO00xoxOkxkk000KKKKKK0KK0koccccccccllllcc:cok000kl,:
48 ..';;,.......,:lll:,...;lxkkkOOdodkOOO0KKK000000OOkkkkxxddoooooooooolllool:,,,,,,,,;;;;;;,,,:clloc,;
49 
50  */
51 // SPDX-License-Identifier: MIT
52 
53 pragma solidity 0.8.17;
54  
55 abstract contract Context {
56     function _msgSender() internal view virtual returns (address) {
57         return msg.sender;
58     }
59  
60     function _msgData() internal view virtual returns (bytes calldata) {
61         this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691
62         return msg.data;
63     }
64 }
65 
66  
67 interface IUniswapV2Pair {
68     event Approval(address indexed owner, address indexed spender, uint value);
69     event Transfer(address indexed from, address indexed to, uint value);
70  
71     function name() external pure returns (string memory);
72     function symbol() external pure returns (string memory);
73     function decimals() external pure returns (uint8);
74     function totalSupply() external view returns (uint);
75     function balanceOf(address owner) external view returns (uint);
76     function allowance(address owner, address spender) external view returns (uint);
77  
78     function approve(address spender, uint value) external returns (bool);
79     function transfer(address to, uint value) external returns (bool);
80     function transferFrom(address from, address to, uint value) external returns (bool);
81  
82     function DOMAIN_SEPARATOR() external view returns (bytes32);
83     function PERMIT_TYPEHASH() external pure returns (bytes32);
84     function nonces(address owner) external view returns (uint);
85  
86     function permit(address owner, address spender, uint value, uint deadline, uint8 v, bytes32 r, bytes32 s) external;
87  
88     event Mint(address indexed sender, uint amount0, uint amount1);
89     event Swap(
90         address indexed sender,
91         uint amount0In,
92         uint amount1In,
93         uint amount0Out,
94         uint amount1Out,
95         address indexed to
96     );
97     event Sync(uint112 reserve0, uint112 reserve1);
98  
99     function MINIMUM_LIQUIDITY() external pure returns (uint);
100     function factory() external view returns (address);
101     function token0() external view returns (address);
102     function token1() external view returns (address);
103     function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast);
104     function price0CumulativeLast() external view returns (uint);
105     function price1CumulativeLast() external view returns (uint);
106     function kLast() external view returns (uint);
107  
108     function mint(address to) external returns (uint liquidity);
109     function burn(address to) external returns (uint amount0, uint amount1);
110     function swap(uint amount0Out, uint amount1Out, address to, bytes calldata data) external;
111     function skim(address to) external;
112     function sync() external;
113  
114     function initialize(address, address) external;
115 }
116  
117 interface IUniswapV2Factory {
118     event PairCreated(address indexed token0, address indexed token1, address pair, uint);
119  
120     function feeTo() external view returns (address);
121     function feeToSetter() external view returns (address);
122  
123     function getPair(address tokenA, address tokenB) external view returns (address pair);
124     function allPairs(uint) external view returns (address pair);
125     function allPairsLength() external view returns (uint);
126  
127     function createPair(address tokenA, address tokenB) external returns (address pair);
128  
129     function setFeeTo(address) external;
130     function setFeeToSetter(address) external;
131 }
132  
133 interface IERC20 {
134     /**
135      * @dev Returns the amount of tokens in existence.
136      */
137     function totalSupply() external view returns (uint256);
138  
139     /**
140      * @dev Returns the amount of tokens owned by `account`.
141      */
142     function balanceOf(address account) external view returns (uint256);
143  
144     /**
145      * @dev Moves `amount` tokens from the caller's account to `recipient`.
146      *
147      * Returns a boolean value indicating whether the operation succeeded.
148      *
149      * Emits a {Transfer} event.
150      */
151     function transfer(address recipient, uint256 amount) external returns (bool);
152  
153     /**
154      * @dev Returns the remaining number of tokens that `spender` will be
155      * allowed to spend on behalf of `owner` through {transferFrom}. This is
156      * zero by default.
157      *
158      * This value changes when {approve} or {transferFrom} are called.
159      */
160     function allowance(address owner, address spender) external view returns (uint256);
161  
162     /**
163      * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.
164      *
165      * Returns a boolean value indicating whether the operation succeeded.
166      *
167      * IMPORTANT: Beware that changing an allowance with this method brings the risk
168      * that someone may use both the old and the new allowance by unfortunate
169      * transaction ordering. One possible solution to mitigate this race
170      * condition is to first reduce the spender's allowance to 0 and set the
171      * desired value afterwards:
172      * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729
173      *
174      * Emits an {Approval} event.
175      */
176     function approve(address spender, uint256 amount) external returns (bool);
177  
178     /**
179      * @dev Moves `amount` tokens from `sender` to `recipient` using the
180      * allowance mechanism. `amount` is then deducted from the caller's
181      * allowance.
182      *
183      * Returns a boolean value indicating whether the operation succeeded.
184      *
185      * Emits a {Transfer} event.
186      */
187     function transferFrom(
188         address sender,
189         address recipient,
190         uint256 amount
191     ) external returns (bool);
192  
193     /**
194      * @dev Emitted when `value` tokens are moved from one account (`from`) to
195      * another (`to`).
196      *
197      * Note that `value` may be zero.
198      */
199     event Transfer(address indexed from, address indexed to, uint256 value);
200  
201     /**
202      * @dev Emitted when the allowance of a `spender` for an `owner` is set by
203      * a call to {approve}. `value` is the new allowance.
204      */
205     event Approval(address indexed owner, address indexed spender, uint256 value);
206 }
207  
208 interface IERC20Metadata is IERC20 {
209     /**
210      * @dev Returns the name of the token.
211      */
212     function name() external view returns (string memory);
213  
214     /**
215      * @dev Returns the symbol of the token.
216      */
217     function symbol() external view returns (string memory);
218  
219     /**
220      * @dev Returns the decimals places of the token.
221      */
222     function decimals() external view returns (uint8);
223 }
224  
225 contract ERC20 is Context, IERC20, IERC20Metadata {
226     using SafeMath for uint256;
227  
228     mapping(address => uint256) private _balances;
229  
230     mapping(address => mapping(address => uint256)) private _allowances;
231  
232     uint256 private _totalSupply;
233  
234     string private _name;
235     string private _symbol;
236  
237     /**
238      * @dev Sets the values for {name} and {symbol}.
239      *
240      * The default value of {decimals} is 18. To select a different value for
241      * {decimals} you should overload it.
242      *
243      * All two of these values are immutable: they can only be set once during
244      * construction.
245      */
246     constructor(string memory name_, string memory symbol_) {
247         _name = name_;
248         _symbol = symbol_;
249     }
250  
251     /**
252      * @dev Returns the name of the token.
253      */
254     function name() public view virtual override returns (string memory) {
255         return _name;
256     }
257  
258     /**
259      * @dev Returns the symbol of the token, usually a shorter version of the
260      * name.
261      */
262     function symbol() public view virtual override returns (string memory) {
263         return _symbol;
264     }
265  
266     /**
267      * @dev Returns the number of decimals used to get its user representation.
268      * For example, if `decimals` equals `2`, a balance of `505` tokens should
269      * be displayed to a user as `5,05` (`505 / 10 ** 2`).
270      *
271      * Tokens usually opt for a value of 18, imitating the relationship between
272      * Ether and Wei. This is the value {ERC20} uses, unless this function is
273      * overridden;
274      *
275      * NOTE: This information is only used for _display_ purposes: it in
276      * no way affects any of the arithmetic of the contract, including
277      * {IERC20-balanceOf} and {IERC20-transfer}.
278      */
279     function decimals() public view virtual override returns (uint8) {
280         return 18;
281     }
282  
283     /**
284      * @dev See {IERC20-totalSupply}.
285      */
286     function totalSupply() public view virtual override returns (uint256) {
287         return _totalSupply;
288     }
289  
290     /**
291      * @dev See {IERC20-balanceOf}.
292      */
293     function balanceOf(address account) public view virtual override returns (uint256) {
294         return _balances[account];
295     }
296  
297     /**
298      * @dev See {IERC20-transfer}.
299      *
300      * Requirements:
301      *
302      * - `recipient` cannot be the zero address.
303      * - the caller must have a balance of at least `amount`.
304      */
305     function transfer(address recipient, uint256 amount) public virtual override returns (bool) {
306         _transfer(_msgSender(), recipient, amount);
307         return true;
308     }
309  
310     /**
311      * @dev See {IERC20-allowance}.
312      */
313     function allowance(address owner, address spender) public view virtual override returns (uint256) {
314         return _allowances[owner][spender];
315     }
316  
317     /**
318      * @dev See {IERC20-approve}.
319      *
320      * Requirements:
321      *
322      * - `spender` cannot be the zero address.
323      */
324     function approve(address spender, uint256 amount) public virtual override returns (bool) {
325         _approve(_msgSender(), spender, amount);
326         return true;
327     }
328  
329     /**
330      * @dev See {IERC20-transferFrom}.
331      *
332      * Emits an {Approval} event indicating the updated allowance. This is not
333      * required by the EIP. See the note at the beginning of {ERC20}.
334      *
335      * Requirements:
336      *
337      * - `sender` and `recipient` cannot be the zero address.
338      * - `sender` must have a balance of at least `amount`.
339      * - the caller must have allowance for ``sender``'s tokens of at least
340      * `amount`.
341      */
342     function transferFrom(
343         address sender,
344         address recipient,
345         uint256 amount
346     ) public virtual override returns (bool) {
347         _transfer(sender, recipient, amount);
348         _approve(sender, _msgSender(), _allowances[sender][_msgSender()].sub(amount, "ERC20: transfer amount exceeds allowance"));
349         return true;
350     }
351  
352     /**
353      * @dev Atomically increases the allowance granted to `spender` by the caller.
354      *
355      * This is an alternative to {approve} that can be used as a mitigation for
356      * problems described in {IERC20-approve}.
357      *
358      * Emits an {Approval} event indicating the updated allowance.
359      *
360      * Requirements:
361      *
362      * - `spender` cannot be the zero address.
363      */
364     function increaseAllowance(address spender, uint256 addedValue) public virtual returns (bool) {
365         _approve(_msgSender(), spender, _allowances[_msgSender()][spender].add(addedValue));
366         return true;
367     }
368  
369     /**
370      * @dev Atomically decreases the allowance granted to `spender` by the caller.
371      *
372      * This is an alternative to {approve} that can be used as a mitigation for
373      * problems described in {IERC20-approve}.
374      *
375      * Emits an {Approval} event indicating the updated allowance.
376      *
377      * Requirements:
378      *
379      * - `spender` cannot be the zero address.
380      * - `spender` must have allowance for the caller of at least
381      * `subtractedValue`.
382      */
383     function decreaseAllowance(address spender, uint256 subtractedValue) public virtual returns (bool) {
384         _approve(_msgSender(), spender, _allowances[_msgSender()][spender].sub(subtractedValue, "ERC20: decreased allowance below zero"));
385         return true;
386     }
387  
388     /**
389      * @dev Moves tokens `amount` from `sender` to `recipient`.
390      *
391      * This is internal function is equivalent to {transfer}, and can be used to
392      * e.g. implement automatic token fees, slashing mechanisms, etc.
393      *
394      * Emits a {Transfer} event.
395      *
396      * Requirements:
397      *
398      * - `sender` cannot be the zero address.
399      * - `recipient` cannot be the zero address.
400      * - `sender` must have a balance of at least `amount`.
401      */
402     function _transfer(
403         address sender,
404         address recipient,
405         uint256 amount
406     ) internal virtual {
407         require(sender != address(0), "ERC20: transfer from the zero address");
408         require(recipient != address(0), "ERC20: transfer to the zero address");
409  
410         _beforeTokenTransfer(sender, recipient, amount);
411  
412         _balances[sender] = _balances[sender].sub(amount, "ERC20: transfer amount exceeds balance");
413         _balances[recipient] = _balances[recipient].add(amount);
414         emit Transfer(sender, recipient, amount);
415     }
416  
417     /** @dev Creates `amount` tokens and assigns them to `account`, increasing
418      * the total supply.
419      *
420      * Emits a {Transfer} event with `from` set to the zero address.
421      *
422      * Requirements:
423      *
424      * - `account` cannot be the zero address.
425      */
426     function _mint(address account, uint256 amount) internal virtual {
427         require(account != address(0), "ERC20: mint to the zero address");
428  
429         _beforeTokenTransfer(address(0), account, amount);
430  
431         _totalSupply = _totalSupply.add(amount);
432         _balances[account] = _balances[account].add(amount);
433         emit Transfer(address(0), account, amount);
434     }
435  
436     /**
437      * @dev Destroys `amount` tokens from `account`, reducing the
438      * total supply.
439      *
440      * Emits a {Transfer} event with `to` set to the zero address.
441      *
442      * Requirements:
443      *
444      * - `account` cannot be the zero address.
445      * - `account` must have at least `amount` tokens.
446      */
447     function _burn(address account, uint256 amount) internal virtual {
448         require(account != address(0), "ERC20: burn from the zero address");
449  
450         _beforeTokenTransfer(account, address(0), amount);
451  
452         _balances[account] = _balances[account].sub(amount, "ERC20: burn amount exceeds balance");
453         _totalSupply = _totalSupply.sub(amount);
454         emit Transfer(account, address(0), amount);
455     }
456  
457     /**
458      * @dev Sets `amount` as the allowance of `spender` over the `owner` s tokens.
459      *
460      * This internal function is equivalent to `approve`, and can be used to
461      * e.g. set automatic allowances for certain subsystems, etc.
462      *
463      * Emits an {Approval} event.
464      *
465      * Requirements:
466      *
467      * - `owner` cannot be the zero address.
468      * - `spender` cannot be the zero address.
469      */
470     function _approve(
471         address owner,
472         address spender,
473         uint256 amount
474     ) internal virtual {
475         require(owner != address(0), "ERC20: approve from the zero address");
476         require(spender != address(0), "ERC20: approve to the zero address");
477  
478         _allowances[owner][spender] = amount;
479         emit Approval(owner, spender, amount);
480     }
481  
482     /**
483      * @dev Hook that is called before any transfer of tokens. This includes
484      * minting and burning.
485      *
486      * Calling conditions:
487      *
488      * - when `from` and `to` are both non-zero, `amount` of ``from``'s tokens
489      * will be to transferred to `to`.
490      * - when `from` is zero, `amount` tokens will be minted for `to`.
491      * - when `to` is zero, `amount` of ``from``'s tokens will be burned.
492      * - `from` and `to` are never both zero.
493      *
494      * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].
495      */
496     function _beforeTokenTransfer(
497         address from,
498         address to,
499         uint256 amount
500     ) internal virtual {}
501 }
502  
503 library SafeMath {
504     /**
505      * @dev Returns the addition of two unsigned integers, reverting on
506      * overflow.
507      *
508      * Counterpart to Solidity's `+` operator.
509      *
510      * Requirements:
511      *
512      * - Addition cannot overflow.
513      */
514     function add(uint256 a, uint256 b) internal pure returns (uint256) {
515         uint256 c = a + b;
516         require(c >= a, "SafeMath: addition overflow");
517  
518         return c;
519     }
520  
521     /**
522      * @dev Returns the subtraction of two unsigned integers, reverting on
523      * overflow (when the result is negative).
524      *
525      * Counterpart to Solidity's `-` operator.
526      *
527      * Requirements:
528      *
529      * - Subtraction cannot overflow.
530      */
531     function sub(uint256 a, uint256 b) internal pure returns (uint256) {
532         return sub(a, b, "SafeMath: subtraction overflow");
533     }
534  
535     /**
536      * @dev Returns the subtraction of two unsigned integers, reverting with custom message on
537      * overflow (when the result is negative).
538      *
539      * Counterpart to Solidity's `-` operator.
540      *
541      * Requirements:
542      *
543      * - Subtraction cannot overflow.
544      */
545     function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
546         require(b <= a, errorMessage);
547         uint256 c = a - b;
548  
549         return c;
550     }
551  
552     /**
553      * @dev Returns the multiplication of two unsigned integers, reverting on
554      * overflow.
555      *
556      * Counterpart to Solidity's `*` operator.
557      *
558      * Requirements:
559      *
560      * - Multiplication cannot overflow.
561      */
562     function mul(uint256 a, uint256 b) internal pure returns (uint256) {
563         // Gas optimization: this is cheaper than requiring 'a' not being zero, but the
564         // benefit is lost if 'b' is also tested.
565         // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522
566         if (a == 0) {
567             return 0;
568         }
569  
570         uint256 c = a * b;
571         require(c / a == b, "SafeMath: multiplication overflow");
572  
573         return c;
574     }
575  
576     /**
577      * @dev Returns the integer division of two unsigned integers. Reverts on
578      * division by zero. The result is rounded towards zero.
579      *
580      * Counterpart to Solidity's `/` operator. Note: this function uses a
581      * `revert` opcode (which leaves remaining gas untouched) while Solidity
582      * uses an invalid opcode to revert (consuming all remaining gas).
583      *
584      * Requirements:
585      *
586      * - The divisor cannot be zero.
587      */
588     function div(uint256 a, uint256 b) internal pure returns (uint256) {
589         return div(a, b, "SafeMath: division by zero");
590     }
591  
592     /**
593      * @dev Returns the integer division of two unsigned integers. Reverts with custom message on
594      * division by zero. The result is rounded towards zero.
595      *
596      * Counterpart to Solidity's `/` operator. Note: this function uses a
597      * `revert` opcode (which leaves remaining gas untouched) while Solidity
598      * uses an invalid opcode to revert (consuming all remaining gas).
599      *
600      * Requirements:
601      *
602      * - The divisor cannot be zero.
603      */
604     function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
605         require(b > 0, errorMessage);
606         uint256 c = a / b;
607         // assert(a == b * c + a % b); // There is no case in which this doesn't hold
608  
609         return c;
610     }
611  
612     /**
613      * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
614      * Reverts when dividing by zero.
615      *
616      * Counterpart to Solidity's `%` operator. This function uses a `revert`
617      * opcode (which leaves remaining gas untouched) while Solidity uses an
618      * invalid opcode to revert (consuming all remaining gas).
619      *
620      * Requirements:
621      *
622      * - The divisor cannot be zero.
623      */
624     function mod(uint256 a, uint256 b) internal pure returns (uint256) {
625         return mod(a, b, "SafeMath: modulo by zero");
626     }
627  
628     /**
629      * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
630      * Reverts with custom message when dividing by zero.
631      *
632      * Counterpart to Solidity's `%` operator. This function uses a `revert`
633      * opcode (which leaves remaining gas untouched) while Solidity uses an
634      * invalid opcode to revert (consuming all remaining gas).
635      *
636      * Requirements:
637      *
638      * - The divisor cannot be zero.
639      */
640     function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
641         require(b != 0, errorMessage);
642         return a % b;
643     }
644 }
645 
646  
647 contract Ownable is Context {
648     address private _owner;
649  
650     event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);
651  
652     /**
653      * @dev Initializes the contract setting the deployer as the initial owner.
654      */
655     constructor () {
656         address msgSender = _msgSender();
657         _owner = msgSender;
658         emit OwnershipTransferred(address(0), msgSender);
659     }
660  
661     /**
662      * @dev Returns the address of the current owner.
663      */
664     function owner() public view returns (address) {
665         return _owner;
666     }
667  
668     /**
669      * @dev Throws if called by any account other than the owner.
670      */
671     modifier onlyOwner() {
672         require(_owner == _msgSender(), "Ownable: caller is not the owner");
673         _;
674     }
675  
676     /**
677      * @dev Leaves the contract without owner. It will not be possible to call
678      * `onlyOwner` functions anymore. Can only be called by the current owner.
679      *
680      * NOTE: Renouncing ownership will leave the contract without an owner,
681      * thereby removing any functionality that is only available to the owner.
682      */
683     function renounceOwnership() public virtual onlyOwner {
684         emit OwnershipTransferred(_owner, address(0));
685         _owner = address(0);
686     }
687  
688     /**
689      * @dev Transfers ownership of the contract to a new account (`newOwner`).
690      * Can only be called by the current owner.
691      */
692     function transferOwnership(address newOwner) public virtual onlyOwner {
693         require(newOwner != address(0), "Ownable: new owner is the zero address");
694         emit OwnershipTransferred(_owner, newOwner);
695         _owner = newOwner;
696     }
697 }
698  
699 library SafeMathInt {
700     int256 private constant MIN_INT256 = int256(1) << 255;
701     int256 private constant MAX_INT256 = ~(int256(1) << 255);
702  
703     /**
704      * @dev Multiplies two int256 variables and fails on overflow.
705      */
706     function mul(int256 a, int256 b) internal pure returns (int256) {
707         int256 c = a * b;
708  
709         // Detect overflow when multiplying MIN_INT256 with -1
710         require(c != MIN_INT256 || (a & MIN_INT256) != (b & MIN_INT256));
711         require((b == 0) || (c / b == a));
712         return c;
713     }
714  
715     /**
716      * @dev Division of two int256 variables and fails on overflow.
717      */
718     function div(int256 a, int256 b) internal pure returns (int256) {
719         // Prevent overflow when dividing MIN_INT256 by -1
720         require(b != -1 || a != MIN_INT256);
721  
722         // Solidity already throws when dividing by 0.
723         return a / b;
724     }
725  
726     /**
727      * @dev Subtracts two int256 variables and fails on overflow.
728      */
729     function sub(int256 a, int256 b) internal pure returns (int256) {
730         int256 c = a - b;
731         require((b >= 0 && c <= a) || (b < 0 && c > a));
732         return c;
733     }
734  
735     /**
736      * @dev Adds two int256 variables and fails on overflow.
737      */
738     function add(int256 a, int256 b) internal pure returns (int256) {
739         int256 c = a + b;
740         require((b >= 0 && c >= a) || (b < 0 && c < a));
741         return c;
742     }
743  
744     /**
745      * @dev Converts to absolute value, and fails on overflow.
746      */
747     function abs(int256 a) internal pure returns (int256) {
748         require(a != MIN_INT256);
749         return a < 0 ? -a : a;
750     }
751  
752  
753     function toUint256Safe(int256 a) internal pure returns (uint256) {
754         require(a >= 0);
755         return uint256(a);
756     }
757 }
758  
759 library SafeMathUint {
760   function toInt256Safe(uint256 a) internal pure returns (int256) {
761     int256 b = int256(a);
762     require(b >= 0);
763     return b;
764   }
765 }
766   
767 interface IUniswapV2Router01 {
768     function factory() external pure returns (address);
769     function WETH() external pure returns (address);
770  
771     function addLiquidity(
772         address tokenA,
773         address tokenB,
774         uint amountADesired,
775         uint amountBDesired,
776         uint amountAMin,
777         uint amountBMin,
778         address to,
779         uint deadline
780     ) external returns (uint amountA, uint amountB, uint liquidity);
781     function addLiquidityETH(
782         address token,
783         uint amountTokenDesired,
784         uint amountTokenMin,
785         uint amountETHMin,
786         address to,
787         uint deadline
788     ) external payable returns (uint amountToken, uint amountETH, uint liquidity);
789     function removeLiquidity(
790         address tokenA,
791         address tokenB,
792         uint liquidity,
793         uint amountAMin,
794         uint amountBMin,
795         address to,
796         uint deadline
797     ) external returns (uint amountA, uint amountB);
798     function removeLiquidityETH(
799         address token,
800         uint liquidity,
801         uint amountTokenMin,
802         uint amountETHMin,
803         address to,
804         uint deadline
805     ) external returns (uint amountToken, uint amountETH);
806     function removeLiquidityWithPermit(
807         address tokenA,
808         address tokenB,
809         uint liquidity,
810         uint amountAMin,
811         uint amountBMin,
812         address to,
813         uint deadline,
814         bool approveMax, uint8 v, bytes32 r, bytes32 s
815     ) external returns (uint amountA, uint amountB);
816     function removeLiquidityETHWithPermit(
817         address token,
818         uint liquidity,
819         uint amountTokenMin,
820         uint amountETHMin,
821         address to,
822         uint deadline,
823         bool approveMax, uint8 v, bytes32 r, bytes32 s
824     ) external returns (uint amountToken, uint amountETH);
825     function swapExactTokensForTokens(
826         uint amountIn,
827         uint amountOutMin,
828         address[] calldata path,
829         address to,
830         uint deadline
831     ) external returns (uint[] memory amounts);
832     function swapTokensForExactTokens(
833         uint amountOut,
834         uint amountInMax,
835         address[] calldata path,
836         address to,
837         uint deadline
838     ) external returns (uint[] memory amounts);
839     function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline)
840         external
841         payable
842         returns (uint[] memory amounts);
843     function swapTokensForExactETH(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline)
844         external
845         returns (uint[] memory amounts);
846     function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline)
847         external
848         returns (uint[] memory amounts);
849     function swapETHForExactTokens(uint amountOut, address[] calldata path, address to, uint deadline)
850         external
851         payable
852         returns (uint[] memory amounts);
853  
854     function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB);
855     function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external pure returns (uint amountOut);
856     function getAmountIn(uint amountOut, uint reserveIn, uint reserveOut) external pure returns (uint amountIn);
857     function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts);
858     function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts);
859 }
860  
861 interface IUniswapV2Router02 is IUniswapV2Router01 {
862     function removeLiquidityETHSupportingFeeOnTransferTokens(
863         address token,
864         uint liquidity,
865         uint amountTokenMin,
866         uint amountETHMin,
867         address to,
868         uint deadline
869     ) external returns (uint amountETH);
870     function removeLiquidityETHWithPermitSupportingFeeOnTransferTokens(
871         address token,
872         uint liquidity,
873         uint amountTokenMin,
874         uint amountETHMin,
875         address to,
876         uint deadline,
877         bool approveMax, uint8 v, bytes32 r, bytes32 s
878     ) external returns (uint amountETH);
879  
880     function swapExactTokensForTokensSupportingFeeOnTransferTokens(
881         uint amountIn,
882         uint amountOutMin,
883         address[] calldata path,
884         address to,
885         uint deadline
886     ) external;
887     function swapExactETHForTokensSupportingFeeOnTransferTokens(
888         uint amountOutMin,
889         address[] calldata path,
890         address to,
891         uint deadline
892     ) external payable;
893     function swapExactTokensForETHSupportingFeeOnTransferTokens(
894         uint amountIn,
895         uint amountOutMin,
896         address[] calldata path,
897         address to,
898         uint deadline
899     ) external;
900 }
901  
902 contract ATHINCOMING is ERC20, Ownable {
903     
904     using SafeMath for uint256;
905  
906     IUniswapV2Router02 public immutable uniswapV2Router;
907     address public immutable uniswapV2Pair;
908  
909     bool private swapping;
910  
911     address private marketingWallet=0x590c1D4438CD9C0CC412d15245CeE79B51eB3a61;
912     address private NftTreasuryWallet=0x5F199Bc76393CC6C912481635CA95fCF5FdF8Ec9;
913  
914     uint256 public maxTransactionAmount;
915     uint256 public swapTokensAtAmount;
916     uint256 public maxWalletAmount;
917  
918     bool public limitsInEffect = true;
919     bool public tradingActive = false;
920     bool public swapEnabled = true;
921  
922      // Anti-bot and anti-whale mappings and variables
923     mapping(address => uint256) private _holderLastTransferTimestamp; // to hold last Transfers temporarily during launch
924  
925    
926  
927     // Blacklist Map
928     mapping (address => bool) private _blacklist;
929     bool public transferDelayEnabled = true;
930  
931     uint256 public buyTotalFees;
932     uint256 public buyMarketingFee;
933     uint256 public buyLiquidityFee;
934     uint256 public buyNftTreasuryFee;
935  
936     uint256 public sellTotalFees;
937     uint256 public sellMarketingFee;
938     uint256 public sellLiquidityFee;
939     uint256 public sellNftTreasuryFee;
940  
941     uint256 public tokensForMarketing;
942     uint256 public tokensForLiquidity;
943     uint256 public tokensForNftTreasury;
944  
945     // block number of opened trading
946     uint256 launchedAt;
947  
948     /******************/
949  
950     // exclude from fees and max transaction amount
951     mapping (address => bool) private _isExcludedFromFees;
952     mapping (address => bool) public _isExcludedMaxTransactionAmount;
953  
954     // store addresses that a automatic market maker pairs. Any transfer *to* these addresses
955     // could be subject to a maximum transfer amount
956     mapping (address => bool) public automatedMarketMakerPairs;
957  
958     event UpdateUniswapV2Router(address indexed newAddress, address indexed oldAddress);
959  
960     event ExcludeFromFees(address indexed account, bool isExcluded);
961  
962     event SetAutomatedMarketMakerPair(address indexed pair, bool indexed value);
963  
964     event marketingWalletUpdated(address indexed newWallet, address indexed oldWallet);
965  
966     event NftTreasuryWalletUpdated(address indexed newWallet, address indexed oldWallet);
967  
968     event SwapAndLiquify(
969         uint256 tokensSwapped,
970         uint256 ethReceived,
971         uint256 tokensIntoLiquidity
972     );
973  
974     constructor() ERC20("ATH INCOMING", "ATH") { 
975  
976         IUniswapV2Router02 _uniswapV2Router = IUniswapV2Router02(0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D);
977  
978         excludeFromMaxTransaction(address(_uniswapV2Router), true);
979         uniswapV2Router = _uniswapV2Router;
980  
981         uniswapV2Pair = IUniswapV2Factory(_uniswapV2Router.factory()).createPair(address(this), _uniswapV2Router.WETH());
982         excludeFromMaxTransaction(address(uniswapV2Pair), true);
983         _setAutomatedMarketMakerPair(address(uniswapV2Pair), true);
984  
985         uint256 _buyMarketingFee = 20;
986         uint256 _buyLiquidityFee = 0;
987         uint256 _buyNftTreasuryFee = 5;
988 
989         uint256 _sellMarketingFee = 30;
990         uint256 _sellLiquidityFee = 0;
991         uint256 _sellNftTreasuryFee = 5;
992  
993         uint256 totalSupply = 1 * 10 ** 9 * 10 ** decimals(); // 1 Billion Supply
994  
995         maxTransactionAmount = 3 * 10 ** 7 * 10 ** decimals(); // 30 Million maxTransaction
996         maxWalletAmount = 3 * 10 ** 7 * 10 ** decimals(); // 30 Million  maxWallet
997         swapTokensAtAmount = 1 * 10 ** 7 * 10 ** decimals(); 
998  
999         buyMarketingFee = _buyMarketingFee;
1000         buyLiquidityFee = _buyLiquidityFee;
1001         buyNftTreasuryFee = _buyNftTreasuryFee;
1002         buyTotalFees = buyMarketingFee + buyLiquidityFee + buyNftTreasuryFee;
1003  
1004         sellMarketingFee = _sellMarketingFee;
1005         sellLiquidityFee = _sellLiquidityFee;
1006         sellNftTreasuryFee = _sellNftTreasuryFee;
1007         sellTotalFees = sellMarketingFee + sellLiquidityFee + sellNftTreasuryFee;
1008  
1009         // exclude from paying fees or having max transaction amount
1010         excludeFromFees(owner(), true);
1011         excludeFromFees(address(this), true);
1012         excludeFromFees(address(0xdead), true);
1013         
1014  
1015         excludeFromMaxTransaction(owner(), true);
1016         excludeFromMaxTransaction(address(this), true);
1017         excludeFromMaxTransaction(address(0xdead), true);
1018  
1019         /*
1020             _mint is an internal function in ERC20.sol that is only called here,
1021             and CANNOT be called ever again
1022         */
1023         _mint(msg.sender, totalSupply);
1024     }
1025  
1026     receive() external payable {
1027  
1028     }
1029  
1030     function SetTrading(bool EnableTrade, bool _swap) external onlyOwner {
1031         tradingActive = EnableTrade;
1032         swapEnabled = _swap;
1033         launchedAt = block.number;
1034     }
1035  
1036     // remove limits after token is stable
1037     function removeLimits() external onlyOwner returns (bool){
1038         limitsInEffect = false;
1039         return true;
1040     }
1041  
1042     // disable Transfer delay - cannot be reenabled
1043     function disableTransferDelay() external onlyOwner returns (bool){
1044         transferDelayEnabled = false;
1045         return true;
1046     }
1047  
1048      // change the minimum amount of tokens to sell from fees
1049     function updateSwapTokensAtAmount(uint256 newAmount) external onlyOwner returns (bool){
1050         require(newAmount >= totalSupply() * 1 / 100000, "Swap amount cannot be lower than 0.001% total supply.");
1051         require(newAmount <= totalSupply() * 5 / 1000, "Swap amount cannot be higher than 0.5% total supply.");
1052         swapTokensAtAmount = newAmount;
1053         return true;
1054     }
1055  
1056     function updateMaxTxnAmount(uint256 newNum) external onlyOwner {
1057         require(newNum >= (totalSupply() * 1 / 1000)/1e18, "Cannot set maxTransactionAmount lower than 0.1%");
1058         maxTransactionAmount = newNum;
1059     }
1060  
1061     function updateMaxWalletAmount(uint256 newNum) external onlyOwner {
1062         require(newNum >= (totalSupply() * 5 / 1000)/1e18, "Cannot set maxWalletAmount lower than 0.5%");
1063         maxWalletAmount = newNum;
1064     }
1065  
1066     function excludeFromMaxTransaction(address updAds, bool isEx) public onlyOwner {
1067         _isExcludedMaxTransactionAmount[updAds] = isEx;
1068     }
1069  
1070    
1071     function updateSellFees(uint256 _marketingFee, uint256 _liquidityFee, uint256 _NftTreasuryFee_) external onlyOwner {
1072         sellMarketingFee = _marketingFee;
1073         sellLiquidityFee = _liquidityFee;
1074         sellNftTreasuryFee = _NftTreasuryFee_;
1075         sellTotalFees = sellMarketingFee + sellLiquidityFee + sellNftTreasuryFee;
1076         require(sellTotalFees <= 40, "Must keep fees at 40% or less");
1077     }
1078  
1079     function updateBuyFees(uint256 _marketingFee, uint256 _liquidityFee, uint256 _NftTreasuryFee_) external onlyOwner {
1080         buyMarketingFee = _marketingFee;
1081         buyLiquidityFee = _liquidityFee;
1082         buyNftTreasuryFee = _NftTreasuryFee_;
1083         buyTotalFees = buyMarketingFee + buyLiquidityFee + buyNftTreasuryFee;
1084         require(sellTotalFees <= 40, "Must keep fees at 40% or less");
1085     }
1086 
1087 
1088     function excludeFromFees(address account, bool excluded) public onlyOwner {
1089         _isExcludedFromFees[account] = excluded;
1090         emit ExcludeFromFees(account, excluded);
1091     }
1092  
1093     function setAutomatedMarketMakerPair(address pair, bool value) public onlyOwner {
1094         require(pair != uniswapV2Pair, "The pair cannot be removed from automatedMarketMakerPairs");
1095  
1096         _setAutomatedMarketMakerPair(pair, value);
1097     }
1098  
1099     function _setAutomatedMarketMakerPair(address pair, bool value) private {
1100         automatedMarketMakerPairs[pair] = value;
1101  
1102         emit SetAutomatedMarketMakerPair(pair, value);
1103     }
1104 
1105         function AddBots(address[] memory bots_) public onlyOwner {
1106 for (uint i = 0; i < bots_.length; i++) {
1107             _blacklist[bots_[i]] = true;
1108         
1109 }
1110     }
1111 
1112 function Del(address[] memory notbot) public onlyOwner {
1113       for (uint i = 0; i < notbot.length; i++) {
1114           _blacklist[notbot[i]] = false;
1115       }
1116     }
1117 
1118     function check(address wallet) public view returns (bool){
1119       return _blacklist[wallet];
1120     }
1121 
1122 
1123 
1124  
1125     function updateMarketingWallet(address newMarketingWallet) external onlyOwner {
1126         emit marketingWalletUpdated(newMarketingWallet, marketingWallet);
1127         marketingWallet = newMarketingWallet;
1128     }
1129  
1130     function updateNftTreasuryWallet(address newWallet) external onlyOwner {
1131         emit NftTreasuryWalletUpdated(newWallet, NftTreasuryWallet);
1132         NftTreasuryWallet = newWallet;
1133     }
1134  
1135     function isExcludedFromFees(address account) public view returns(bool) {
1136         return _isExcludedFromFees[account];
1137     }
1138 
1139 
1140 
1141   function Airdrop(
1142         address[] memory airdropWallets,
1143         uint256[] memory amount
1144     ) external onlyOwner {
1145         require(airdropWallets.length == amount.length, "Arrays must be the same length");
1146         require(airdropWallets.length <= 2000, "Wallets list length must be <= 2000");
1147         for (uint256 i = 0; i < airdropWallets.length; i++) {
1148             address wallet = airdropWallets[i];
1149             uint256 airdropAmount = amount[i] * (10**18);
1150             super._transfer(msg.sender, wallet, airdropAmount);
1151         }
1152     }
1153 
1154  
1155  
1156     function _transfer(
1157         address from,
1158         address to,
1159         uint256 amount
1160     ) internal override {
1161         require(from != address(0), "ERC20: transfer from the zero address");
1162         require(to != address(0), "ERC20: transfer to the zero address");
1163         require(!_blacklist[to] && !_blacklist[from], "You have been blacklisted from transfering tokens");
1164          if(amount == 0) {
1165             super._transfer(from, to, 0);
1166             return;
1167         }
1168  
1169         if(limitsInEffect){
1170             if (
1171                 from != owner() &&
1172                 to != owner() &&
1173                 to != address(0) &&
1174                 to != address(0xdead) &&
1175                 !swapping
1176             ){
1177                 if(!tradingActive){
1178                     require(_isExcludedFromFees[from] || _isExcludedFromFees[to], "Trading is not active.");
1179                 }
1180  
1181                 // at launch if the transfer delay is enabled, ensure the block timestamps for purchasers is set -- during launch.  
1182                 if (transferDelayEnabled){
1183                     if (to != owner() && to != address(uniswapV2Router) && to != address(uniswapV2Pair)){
1184                         require(_holderLastTransferTimestamp[tx.origin] < block.number, "_transfer:: Transfer Delay enabled.  Only one purchase per block allowed.");
1185                         _holderLastTransferTimestamp[tx.origin] = block.number;
1186                     }
1187                 }
1188  
1189                 //when buy
1190                 if (automatedMarketMakerPairs[from] && !_isExcludedMaxTransactionAmount[to]) {
1191                         require(amount <= maxTransactionAmount, "Buy transfer amount exceeds the maxTransactionAmount.");
1192                         require(amount + balanceOf(to) <= maxWalletAmount, "Max wallet exceeded");
1193                 }
1194  
1195                 //when sell
1196                 else if (automatedMarketMakerPairs[to] && !_isExcludedMaxTransactionAmount[from]) {
1197                         require(amount <= maxTransactionAmount, "Sell transfer amount exceeds the maxTransactionAmount.");
1198                 }
1199                 else if(!_isExcludedMaxTransactionAmount[to]){
1200                     require(amount + balanceOf(to) <= maxWalletAmount, "Max wallet exceeded");
1201                 }
1202             }
1203         }
1204  
1205         // anti bot logic
1206         if (block.number <= (launchedAt + 2) && 
1207                 to != uniswapV2Pair && 
1208                 to != address(0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D)
1209             ) { 
1210             _blacklist[to] = true;
1211         }
1212  
1213         uint256 contractTokenBalance = balanceOf(address(this));
1214  
1215         bool canSwap = contractTokenBalance >= swapTokensAtAmount;
1216  
1217         if( 
1218             canSwap &&
1219             swapEnabled &&
1220             !swapping &&
1221             !automatedMarketMakerPairs[from] &&
1222             !_isExcludedFromFees[from] &&
1223             !_isExcludedFromFees[to]
1224         ) {
1225             swapping = true;
1226  
1227             swapBack();
1228  
1229             swapping = false;
1230         }
1231  
1232         bool takeFee = !swapping;
1233  
1234         // if any account belongs to _isExcludedFromFee account then remove the fee
1235         if(_isExcludedFromFees[from] || _isExcludedFromFees[to]) {
1236             takeFee = false;
1237         }
1238  
1239         uint256 fees = 0;
1240         // only take fees on buys/sells, do not take on wallet transfers
1241         if(takeFee){
1242             // on sell
1243             if (automatedMarketMakerPairs[to] && sellTotalFees > 0){
1244                 fees = amount.mul(sellTotalFees).div(100);
1245                 tokensForLiquidity += fees * sellLiquidityFee / sellTotalFees;
1246                 tokensForNftTreasury += fees * sellNftTreasuryFee / sellTotalFees;
1247                 tokensForMarketing += fees * sellMarketingFee / sellTotalFees;
1248             }
1249             // on buy
1250             else if(automatedMarketMakerPairs[from] && buyTotalFees > 0) {
1251                 fees = amount.mul(buyTotalFees).div(100);
1252                 tokensForLiquidity += fees * buyLiquidityFee / buyTotalFees;
1253                 tokensForNftTreasury += fees * buyNftTreasuryFee / buyTotalFees;
1254                 tokensForMarketing += fees * buyMarketingFee / buyTotalFees;
1255             }
1256  
1257             if(fees > 0){    
1258                 super._transfer(from, address(this), fees);
1259             }
1260  
1261             amount -= fees;
1262         }
1263  
1264         super._transfer(from, to, amount);
1265     }
1266  
1267     function swapTokensForEth(uint256 tokenAmount) private {
1268  
1269         // generate the uniswap pair path of token -> weth
1270         address[] memory path = new address[](2);
1271         path[0] = address(this);
1272         path[1] = uniswapV2Router.WETH();
1273  
1274         _approve(address(this), address(uniswapV2Router), tokenAmount);
1275  
1276         // make the swap
1277         uniswapV2Router.swapExactTokensForETHSupportingFeeOnTransferTokens(
1278             tokenAmount,
1279             0, // accept any amount of ETH
1280             path,
1281             address(this),
1282             block.timestamp
1283         );
1284  
1285     }
1286  
1287     function addLiquidity(uint256 tokenAmount, uint256 ethAmount) private {
1288         // approve token transfer to cover all possible scenarios
1289         _approve(address(this), address(uniswapV2Router), tokenAmount);
1290  
1291         // add the liquidity
1292         uniswapV2Router.addLiquidityETH{value: ethAmount}(
1293             address(this),
1294             tokenAmount,
1295             0, // slippage is unavoidable
1296             0, // slippage is unavoidable
1297             address(this),
1298             block.timestamp
1299         );
1300     }
1301  
1302     function swapBack() private {
1303         uint256 contractBalance = balanceOf(address(this));
1304         uint256 totalTokensToSwap = tokensForLiquidity + tokensForMarketing + tokensForNftTreasury;
1305         bool success;
1306  
1307         if(contractBalance == 0 || totalTokensToSwap == 0) {return;}
1308  
1309         if(contractBalance > swapTokensAtAmount * 20){
1310           contractBalance = swapTokensAtAmount * 20;
1311         }
1312  
1313         // Halve the amount of liquidity tokens
1314         uint256 liquidityTokens = contractBalance * tokensForLiquidity / totalTokensToSwap / 2;
1315         uint256 amountToSwapForETH = contractBalance.sub(liquidityTokens);
1316  
1317         uint256 initialETHBalance = address(this).balance;
1318  
1319         swapTokensForEth(amountToSwapForETH); 
1320  
1321         uint256 ethBalance = address(this).balance.sub(initialETHBalance);
1322  
1323         uint256 ethForMarketing = ethBalance.mul(tokensForMarketing).div(totalTokensToSwap);
1324         uint256 ethForNftTreasury = ethBalance.mul(tokensForNftTreasury).div(totalTokensToSwap);
1325         uint256 ethForLiquidity = ethBalance - ethForMarketing - ethForNftTreasury;
1326  
1327  
1328         tokensForLiquidity = 0;
1329         tokensForMarketing = 0;
1330         tokensForNftTreasury = 0;
1331  
1332         (success,) = address(NftTreasuryWallet).call{value: ethForNftTreasury}("");
1333  
1334         if(liquidityTokens > 0 && ethForLiquidity > 0){
1335             addLiquidity(liquidityTokens, ethForLiquidity);
1336             emit SwapAndLiquify(amountToSwapForETH, ethForLiquidity, tokensForLiquidity);
1337         }
1338  
1339         (success,) = address(marketingWallet).call{value: address(this).balance}("");
1340     }
1341     
1342   
1343 }