1 // File: DEGENERATIVES.sol
2 
3 
4 
5 /**
6             oooo                           oo
7                  o      o                       o    o
8                 o         o                    o      o
9                o           o                 o         o
10                o           o                o          o
11                o            o              o            o
12               o             o             o             o
13               o       o     o            o             o
14               o      o      o           o      o       o
15               o      o      o          o       o      o
16               o      o      o          o      o       o
17               o      o      o         o       o      o
18               o      o      o        o       o      o
19                o      o     o        o      o      o
20                o      o     o       o      o      o
21                o       o   o       o      o      o
22                 o      o   o       o     o      o
23                 o       o   o      o    o     o
24                  o    xxxxxxxxxxxxxx   o     o
25                   xxxxxxxxxxxxxxxxxxxxx     o
26                xxxxxxxxxxxxxxxxxxxxxxxxxx o
27              xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
28            xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
29           xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
30           xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
31           xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
32          xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
33         xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
34        xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
35        xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
36         xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
37          xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
38          xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
39          xxxxxxxxxxxxxxx  x  x    x   xxxxxxxxxx
40          xxxxxxxxxxxxx                 xxxxxxxx
41          xxxxxxxxxxxx                   xxxxxxxx
42          xxxxxxxxxxx                      xxxxxx
43         xxxxxxxxxx                        xxxxxxx                 Sex is Everything
44          xxxxxxxxx                         xxxxxx
45           xxxxxxxx     x x          x x   xxxxxxx
46            xxxxxxx   x     x      x      x xxxxxx
47            xxxxxx                          xxxxx
48           xxxxxxxx    xxxxxx       xxxxxx  xxxxx
49           xxxxxxxx                         xxx
50            xxxxxxx                        xx
51              xxxx             x  x        x
52                xx                         x
53                 x             xxxx       x
54                 x            x    x     x
55                 xx          x      x   x
56                 x x          x    x    x
57                 x   x         xxxx   x
58                 x     x             x x
59                 x       x   x   x   x  x
60                 x  xxxxxx      xxxxxx    x x x x x x x
61                 x  xxxxxxxxxxxxxxxxxx                    x
62                 x  xxxxxxxxxxxxxxxxxx                       x
63                 x  xxxxxx      xxxxxx                         x
64                 x                                               x
65                x                                                  x
66              x                                                     x
67            x                                                         x
68          x                                                            x
69        x                                                                x
70      x                                                                   x
71    x                                                                      x
72   x                                                                        x
73  x                                                                          x
74 x                                                      x                    x
75 x                                                       x                    x
76 x                                                        x
77 x                                                         x
78 x                                                           x
79 x                                                            x
80 x         x                                                    x
81  x         x                    x   x                            x
82  x          x x                  x x              sssssss         x
83  x           x                    x          sssssssssssssssss     x
84  x          x                sssssssssssssssssssssssssssssssssss     x
85   x        ssssss      ssssssssssssssssssssssssssssssssssssssssss  x  x
86   x       ssssssssssssssssssssssssssssssssssssssssssssssssssssssss x   x
87   x       sssssssssssssssssssssssssssssssssssssssssssssssssssssssssx    x
88   x      sssssssssssssssssssssssssss ssssssssssssssssssssssssssssssx     x
89    x     sssssssssssssssssssssssssss sssssssssssssssssssssssssssssss      x
90    x     ssssssssssssssssssssssssssss ssssssssssssssssssssssssssssss       x
91    x      sssssssssssssssssssssssssss ssssssssssssssssssssssssss sss        x
92    x       sssssssssssssssssssssssssss sssssssssssssssssssssss sssss         x
93    x        sssssssssssssssssssssssssss ssssssssssssssssssss ssssss
94    x          ssssssssssssssssssssssssss ssssssssssssssss ssssssss
95    x            x sssssssssssssssssssssss sssssssssssss sssssssss
96    x            x    sssssssssssssssssssssssss  sss  sssssssssss
97    x            x     ssssssssssssssssssssssssssssssssssssssssss
98    x            x       ssssssssssssssssssssssssssssssssssssssss
99    x            x       ssssssssssssssssssssssssssssssssssssssss
100    x            x      ssssssssssssssssssssssssssssssssssssssssss
101   x           xx   sssssssssssssssssssssssssssssssssssssssssssssss
102   x           x xxsssssssssssssssssssssssssssssssssssssssssssssssss
103     x         x      xssssssssssssssssssssssssssssssssssssssssssssss
104      x       x         xsssssssssssssssssssssssssssssssssssssssssssss
105       x    x          x    xssssssssssssssssssssssssssssssssssssssssss
106         x x         x         xsssssssssssssssssssssssssssssssssssssss
107          x         x            xssssssssssssssssssssssssssssssssssssss
108           x   xxxxx                xsssssssssssssssssssssssssssssssssss
109             xxxxxxx                  xssssssssssssssssssssssssssssssssss
110                xxxxx             xx     xsssssssssssssssssssssssssssssss
111               ... ssss             xx    xsssssssssssssssssssssssssssssss.
112              ..... ssss       xxx   xxxx   xsssssssssssssssssssssssssss...
113              ......  sssss  x  xxx      xxx  xsssssssssssssssssssssss ....
114              .......... sssx  x    xx    xsssxxssssssssssssssssss ........
115              ............ sssss      xssssssssssssssssssssssss ...........
116              ............. ssssssxsssssssssssssssssssssssss ..............
117              ................ ssssssssssssssssssssssss ...................
118              .................. ssssssssssssssssssss .....................
119              ................... sssssssssssssssss .......................
120              .................... ssssssssssssss ........................
121             ....................... ssssssssss ..........................
122             ........................ ssssss .............................
123             ......................... ssss .............................
124            .......................... s ...............................
125            ........................... ................................
126            ......................... .................................
127            ........................ ..................................
128            ....................... ..................................
129            ...................... ..................................
130            ..................... ..................................
131            .................... ...................................
132             ..................  ..................................
133             ................. ....................................
134             ............... .....................................
135             .............. .....................................
136             ............. .....................................
137              ........... ......................................
138              .......... ......................................
139              ......... ......................................
140              ......... ....................................
141              ....... .....................................
142               ..... .....................................
143               .... .....................................
144               ... .....................................
145               .. ....................................
146               ......................................
147              .....................................
148             .....................................
149            .....................................
150           ....................................
151          ....................................
152         ...................................
153        ...................................
154        ................................
155       ................................
156      ............................... .
157      .............................. ..
158     ............................ ....
159    ............................. ....
160   ............................ .....
161   ........................... .....
162   ......................... ......
163   ....................... .........
164    ..................... ..........
165    ..................... ..........
166    ..................... ...........
167    ..................... ...........
168    ..................... ...........
169    .................... ............
170    .................... ............
171    .................... ............
172    .................... ............
173    .................... ............
174    .................. ..............
175    .................. ..............
176    .................. ..............
177    ................. ..............
178    ................. .............
179    ................. .............
180    ................ ..............
181    ................ .............
182    ................ .............
183    ...............  ............
184    ............... .............
185    ..............  .............
186     .............  ............
187     .............  ............
188     ............   ............
189     ...........    ............
190     ...........    ............
191      .........     ............
192      .........     ............
193      .........     ...........
194 
195 
196 */
197 
198 
199 
200 
201 // OpenZeppelin Contracts v4.4.1 (security/ReentrancyGuard.sol)
202 
203 pragma solidity ^0.8.0;
204 
205 /**
206  * @dev Contract module that helps prevent reentrant calls to a function.
207  *
208  * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier
209  * available, which can be applied to functions to make sure there are no nested
210  * (reentrant) calls to them.
211  *
212  * Note that because there is a single `nonReentrant` guard, functions marked as
213  * `nonReentrant` may not call one another. This can be worked around by making
214  * those functions `private`, and then adding `external` `nonReentrant` entry
215  * points to them.
216  *
217  * TIP: If you would like to learn more about reentrancy and alternative ways
218  * to protect against it, check out our blog post
219  * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].
220  */
221 abstract contract ReentrancyGuard {
222     // Booleans are more expensive than uint256 or any type that takes up a full
223     // word because each write operation emits an extra SLOAD to first read the
224     // slot's contents, replace the bits taken up by the boolean, and then write
225     // back. This is the compiler's defense against contract upgrades and
226     // pointer aliasing, and it cannot be disabled.
227 
228     // The values being non-zero value makes deployment a bit more expensive,
229     // but in exchange the refund on every call to nonReentrant will be lower in
230     // amount. Since refunds are capped to a percentage of the total
231     // transaction's gas, it is best to keep them low in cases like this one, to
232     // increase the likelihood of the full refund coming into effect.
233     uint256 private constant _NOT_ENTERED = 1;
234     uint256 private constant _ENTERED = 2;
235 
236     uint256 private _status;
237 
238     constructor() {
239         _status = _NOT_ENTERED;
240     }
241 
242     /**
243      * @dev Prevents a contract from calling itself, directly or indirectly.
244      * Calling a `nonReentrant` function from another `nonReentrant`
245      * function is not supported. It is possible to prevent this from happening
246      * by making the `nonReentrant` function external, and making it call a
247      * `private` function that does the actual work.
248      */
249     modifier nonReentrant() {
250         // On the first call to nonReentrant, _notEntered will be true
251         require(_status != _ENTERED, "ReentrancyGuard: reentrant call");
252 
253         // Any calls to nonReentrant after this point will fail
254         _status = _ENTERED;
255 
256         _;
257 
258         // By storing the original value once again, a refund is triggered (see
259         // https://eips.ethereum.org/EIPS/eip-2200)
260         _status = _NOT_ENTERED;
261     }
262 }
263 
264 // File: @openzeppelin/contracts/utils/Strings.sol
265 
266 
267 // OpenZeppelin Contracts v4.4.1 (utils/Strings.sol)
268 
269 pragma solidity ^0.8.0;
270 
271 /**
272  * @dev String operations.
273  */
274 library Strings {
275     bytes16 private constant _HEX_SYMBOLS = "0123456789abcdef";
276 
277     /**
278      * @dev Converts a `uint256` to its ASCII `string` decimal representation.
279      */
280     function toString(uint256 value) internal pure returns (string memory) {
281         // Inspired by OraclizeAPI's implementation - MIT licence
282         // https://github.com/oraclize/ethereum-api/blob/b42146b063c7d6ee1358846c198246239e9360e8/oraclizeAPI_0.4.25.sol
283 
284         if (value == 0) {
285             return "0";
286         }
287         uint256 temp = value;
288         uint256 digits;
289         while (temp != 0) {
290             digits++;
291             temp /= 10;
292         }
293         bytes memory buffer = new bytes(digits);
294         while (value != 0) {
295             digits -= 1;
296             buffer[digits] = bytes1(uint8(48 + uint256(value % 10)));
297             value /= 10;
298         }
299         return string(buffer);
300     }
301 
302     /**
303      * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation.
304      */
305     function toHexString(uint256 value) internal pure returns (string memory) {
306         if (value == 0) {
307             return "0x00";
308         }
309         uint256 temp = value;
310         uint256 length = 0;
311         while (temp != 0) {
312             length++;
313             temp >>= 8;
314         }
315         return toHexString(value, length);
316     }
317 
318     /**
319      * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation with fixed length.
320      */
321     function toHexString(uint256 value, uint256 length) internal pure returns (string memory) {
322         bytes memory buffer = new bytes(2 * length + 2);
323         buffer[0] = "0";
324         buffer[1] = "x";
325         for (uint256 i = 2 * length + 1; i > 1; --i) {
326             buffer[i] = _HEX_SYMBOLS[value & 0xf];
327             value >>= 4;
328         }
329         require(value == 0, "Strings: hex length insufficient");
330         return string(buffer);
331     }
332 }
333 
334 // File: @openzeppelin/contracts/utils/Context.sol
335 
336 
337 // OpenZeppelin Contracts v4.4.1 (utils/Context.sol)
338 
339 pragma solidity ^0.8.0;
340 
341 /**
342  * @dev Provides information about the current execution context, including the
343  * sender of the transaction and its data. While these are generally available
344  * via msg.sender and msg.data, they should not be accessed in such a direct
345  * manner, since when dealing with meta-transactions the account sending and
346  * paying for execution may not be the actual sender (as far as an application
347  * is concerned).
348  *
349  * This contract is only required for intermediate, library-like contracts.
350  */
351 abstract contract Context {
352     function _msgSender() internal view virtual returns (address) {
353         return msg.sender;
354     }
355 
356     function _msgData() internal view virtual returns (bytes calldata) {
357         return msg.data;
358     }
359 }
360 
361 // File: @openzeppelin/contracts/access/Ownable.sol
362 
363 
364 // OpenZeppelin Contracts v4.4.1 (access/Ownable.sol)
365 
366 pragma solidity ^0.8.0;
367 
368 
369 /**
370  * @dev Contract module which provides a basic access control mechanism, where
371  * there is an account (an owner) that can be granted exclusive access to
372  * specific functions.
373  *
374  * By default, the owner account will be the one that deploys the contract. This
375  * can later be changed with {transferOwnership}.
376  *
377  * This module is used through inheritance. It will make available the modifier
378  * `onlyOwner`, which can be applied to your functions to restrict their use to
379  * the owner.
380  */
381 abstract contract Ownable is Context {
382     address private _owner;
383 
384     event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);
385 
386     /**
387      * @dev Initializes the contract setting the deployer as the initial owner.
388      */
389     constructor() {
390         _transferOwnership(_msgSender());
391     }
392 
393     /**
394      * @dev Returns the address of the current owner.
395      */
396     function owner() public view virtual returns (address) {
397         return _owner;
398     }
399 
400     /**
401      * @dev Throws if called by any account other than the owner.
402      */
403     modifier onlyOwner() {
404         require(owner() == _msgSender(), "Ownable: caller is not the owner");
405         _;
406     }
407 
408     /**
409      * @dev Leaves the contract without owner. It will not be possible to call
410      * `onlyOwner` functions anymore. Can only be called by the current owner.
411      *
412      * NOTE: Renouncing ownership will leave the contract without an owner,
413      * thereby removing any functionality that is only available to the owner.
414      */
415     function renounceOwnership() public virtual onlyOwner {
416         _transferOwnership(address(0));
417     }
418 
419     /**
420      * @dev Transfers ownership of the contract to a new account (`newOwner`).
421      * Can only be called by the current owner.
422      */
423     function transferOwnership(address newOwner) public virtual onlyOwner {
424         require(newOwner != address(0), "Ownable: new owner is the zero address");
425         _transferOwnership(newOwner);
426     }
427 
428     /**
429      * @dev Transfers ownership of the contract to a new account (`newOwner`).
430      * Internal function without access restriction.
431      */
432     function _transferOwnership(address newOwner) internal virtual {
433         address oldOwner = _owner;
434         _owner = newOwner;
435         emit OwnershipTransferred(oldOwner, newOwner);
436     }
437 }
438 
439 // File: @openzeppelin/contracts/utils/Address.sol
440 
441 
442 // OpenZeppelin Contracts (last updated v4.5.0) (utils/Address.sol)
443 
444 pragma solidity ^0.8.1;
445 
446 /**
447  * @dev Collection of functions related to the address type
448  */
449 library Address {
450     /**
451      * @dev Returns true if `account` is a contract.
452      *
453      * [IMPORTANT]
454      * ====
455      * It is unsafe to assume that an address for which this function returns
456      * false is an externally-owned account (EOA) and not a contract.
457      *
458      * Among others, `isContract` will return false for the following
459      * types of addresses:
460      *
461      *  - an externally-owned account
462      *  - a contract in construction
463      *  - an address where a contract will be created
464      *  - an address where a contract lived, but was destroyed
465      * ====
466      *
467      * [IMPORTANT]
468      * ====
469      * You shouldn't rely on `isContract` to protect against flash loan attacks!
470      *
471      * Preventing calls from contracts is highly discouraged. It breaks composability, breaks support for smart wallets
472      * like Gnosis Safe, and does not provide security since it can be circumvented by calling from a contract
473      * constructor.
474      * ====
475      */
476     function isContract(address account) internal view returns (bool) {
477         // This method relies on extcodesize/address.code.length, which returns 0
478         // for contracts in construction, since the code is only stored at the end
479         // of the constructor execution.
480 
481         return account.code.length > 0;
482     }
483 
484     /**
485      * @dev Replacement for Solidity's `transfer`: sends `amount` wei to
486      * `recipient`, forwarding all available gas and reverting on errors.
487      *
488      * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost
489      * of certain opcodes, possibly making contracts go over the 2300 gas limit
490      * imposed by `transfer`, making them unable to receive funds via
491      * `transfer`. {sendValue} removes this limitation.
492      *
493      * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].
494      *
495      * IMPORTANT: because control is transferred to `recipient`, care must be
496      * taken to not create reentrancy vulnerabilities. Consider using
497      * {ReentrancyGuard} or the
498      * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].
499      */
500     function sendValue(address payable recipient, uint256 amount) internal {
501         require(address(this).balance >= amount, "Address: insufficient balance");
502 
503         (bool success, ) = recipient.call{value: amount}("");
504         require(success, "Address: unable to send value, recipient may have reverted");
505     }
506 
507     /**
508      * @dev Performs a Solidity function call using a low level `call`. A
509      * plain `call` is an unsafe replacement for a function call: use this
510      * function instead.
511      *
512      * If `target` reverts with a revert reason, it is bubbled up by this
513      * function (like regular Solidity function calls).
514      *
515      * Returns the raw returned data. To convert to the expected return value,
516      * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].
517      *
518      * Requirements:
519      *
520      * - `target` must be a contract.
521      * - calling `target` with `data` must not revert.
522      *
523      * _Available since v3.1._
524      */
525     function functionCall(address target, bytes memory data) internal returns (bytes memory) {
526         return functionCall(target, data, "Address: low-level call failed");
527     }
528 
529     /**
530      * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with
531      * `errorMessage` as a fallback revert reason when `target` reverts.
532      *
533      * _Available since v3.1._
534      */
535     function functionCall(
536         address target,
537         bytes memory data,
538         string memory errorMessage
539     ) internal returns (bytes memory) {
540         return functionCallWithValue(target, data, 0, errorMessage);
541     }
542 
543     /**
544      * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],
545      * but also transferring `value` wei to `target`.
546      *
547      * Requirements:
548      *
549      * - the calling contract must have an ETH balance of at least `value`.
550      * - the called Solidity function must be `payable`.
551      *
552      * _Available since v3.1._
553      */
554     function functionCallWithValue(
555         address target,
556         bytes memory data,
557         uint256 value
558     ) internal returns (bytes memory) {
559         return functionCallWithValue(target, data, value, "Address: low-level call with value failed");
560     }
561 
562     /**
563      * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but
564      * with `errorMessage` as a fallback revert reason when `target` reverts.
565      *
566      * _Available since v3.1._
567      */
568     function functionCallWithValue(
569         address target,
570         bytes memory data,
571         uint256 value,
572         string memory errorMessage
573     ) internal returns (bytes memory) {
574         require(address(this).balance >= value, "Address: insufficient balance for call");
575         require(isContract(target), "Address: call to non-contract");
576 
577         (bool success, bytes memory returndata) = target.call{value: value}(data);
578         return verifyCallResult(success, returndata, errorMessage);
579     }
580 
581     /**
582      * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],
583      * but performing a static call.
584      *
585      * _Available since v3.3._
586      */
587     function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {
588         return functionStaticCall(target, data, "Address: low-level static call failed");
589     }
590 
591     /**
592      * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],
593      * but performing a static call.
594      *
595      * _Available since v3.3._
596      */
597     function functionStaticCall(
598         address target,
599         bytes memory data,
600         string memory errorMessage
601     ) internal view returns (bytes memory) {
602         require(isContract(target), "Address: static call to non-contract");
603 
604         (bool success, bytes memory returndata) = target.staticcall(data);
605         return verifyCallResult(success, returndata, errorMessage);
606     }
607 
608     /**
609      * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],
610      * but performing a delegate call.
611      *
612      * _Available since v3.4._
613      */
614     function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {
615         return functionDelegateCall(target, data, "Address: low-level delegate call failed");
616     }
617 
618     /**
619      * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],
620      * but performing a delegate call.
621      *
622      * _Available since v3.4._
623      */
624     function functionDelegateCall(
625         address target,
626         bytes memory data,
627         string memory errorMessage
628     ) internal returns (bytes memory) {
629         require(isContract(target), "Address: delegate call to non-contract");
630 
631         (bool success, bytes memory returndata) = target.delegatecall(data);
632         return verifyCallResult(success, returndata, errorMessage);
633     }
634 
635     /**
636      * @dev Tool to verifies that a low level call was successful, and revert if it wasn't, either by bubbling the
637      * revert reason using the provided one.
638      *
639      * _Available since v4.3._
640      */
641     function verifyCallResult(
642         bool success,
643         bytes memory returndata,
644         string memory errorMessage
645     ) internal pure returns (bytes memory) {
646         if (success) {
647             return returndata;
648         } else {
649             // Look for revert reason and bubble it up if present
650             if (returndata.length > 0) {
651                 // The easiest way to bubble the revert reason is using memory via assembly
652 
653                 assembly {
654                     let returndata_size := mload(returndata)
655                     revert(add(32, returndata), returndata_size)
656                 }
657             } else {
658                 revert(errorMessage);
659             }
660         }
661     }
662 }
663 
664 // File: @openzeppelin/contracts/token/ERC721/IERC721Receiver.sol
665 
666 
667 // OpenZeppelin Contracts v4.4.1 (token/ERC721/IERC721Receiver.sol)
668 
669 pragma solidity ^0.8.0;
670 
671 /**
672  * @title ERC721 token receiver interface
673  * @dev Interface for any contract that wants to support safeTransfers
674  * from ERC721 asset contracts.
675  */
676 interface IERC721Receiver {
677     /**
678      * @dev Whenever an {IERC721} `tokenId` token is transferred to this contract via {IERC721-safeTransferFrom}
679      * by `operator` from `from`, this function is called.
680      *
681      * It must return its Solidity selector to confirm the token transfer.
682      * If any other value is returned or the interface is not implemented by the recipient, the transfer will be reverted.
683      *
684      * The selector can be obtained in Solidity with `IERC721.onERC721Received.selector`.
685      */
686     function onERC721Received(
687         address operator,
688         address from,
689         uint256 tokenId,
690         bytes calldata data
691     ) external returns (bytes4);
692 }
693 
694 // File: @openzeppelin/contracts/utils/introspection/IERC165.sol
695 
696 
697 // OpenZeppelin Contracts v4.4.1 (utils/introspection/IERC165.sol)
698 
699 pragma solidity ^0.8.0;
700 
701 /**
702  * @dev Interface of the ERC165 standard, as defined in the
703  * https://eips.ethereum.org/EIPS/eip-165[EIP].
704  *
705  * Implementers can declare support of contract interfaces, which can then be
706  * queried by others ({ERC165Checker}).
707  *
708  * For an implementation, see {ERC165}.
709  */
710 interface IERC165 {
711     /**
712      * @dev Returns true if this contract implements the interface defined by
713      * `interfaceId`. See the corresponding
714      * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]
715      * to learn more about how these ids are created.
716      *
717      * This function call must use less than 30 000 gas.
718      */
719     function supportsInterface(bytes4 interfaceId) external view returns (bool);
720 }
721 
722 // File: @openzeppelin/contracts/utils/introspection/ERC165.sol
723 
724 
725 // OpenZeppelin Contracts v4.4.1 (utils/introspection/ERC165.sol)
726 
727 pragma solidity ^0.8.0;
728 
729 
730 /**
731  * @dev Implementation of the {IERC165} interface.
732  *
733  * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check
734  * for the additional interface id that will be supported. For example:
735  *
736  * ```solidity
737  * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {
738  *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);
739  * }
740  * ```
741  *
742  * Alternatively, {ERC165Storage} provides an easier to use but more expensive implementation.
743  */
744 abstract contract ERC165 is IERC165 {
745     /**
746      * @dev See {IERC165-supportsInterface}.
747      */
748     function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {
749         return interfaceId == type(IERC165).interfaceId;
750     }
751 }
752 
753 // File: @openzeppelin/contracts/token/ERC721/IERC721.sol
754 
755 
756 // OpenZeppelin Contracts v4.4.1 (token/ERC721/IERC721.sol)
757 
758 pragma solidity ^0.8.0;
759 
760 
761 /**
762  * @dev Required interface of an ERC721 compliant contract.
763  */
764 interface IERC721 is IERC165 {
765     /**
766      * @dev Emitted when `tokenId` token is transferred from `from` to `to`.
767      */
768     event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);
769 
770     /**
771      * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.
772      */
773     event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);
774 
775     /**
776      * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.
777      */
778     event ApprovalForAll(address indexed owner, address indexed operator, bool approved);
779 
780     /**
781      * @dev Returns the number of tokens in ``owner``'s account.
782      */
783     function balanceOf(address owner) external view returns (uint256 balance);
784 
785     /**
786      * @dev Returns the owner of the `tokenId` token.
787      *
788      * Requirements:
789      *
790      * - `tokenId` must exist.
791      */
792     function ownerOf(uint256 tokenId) external view returns (address owner);
793 
794     /**
795      * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients
796      * are aware of the ERC721 protocol to prevent tokens from being forever locked.
797      *
798      * Requirements:
799      *
800      * - `from` cannot be the zero address.
801      * - `to` cannot be the zero address.
802      * - `tokenId` token must exist and be owned by `from`.
803      * - If the caller is not `from`, it must be have been allowed to move this token by either {approve} or {setApprovalForAll}.
804      * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.
805      *
806      * Emits a {Transfer} event.
807      */
808     function safeTransferFrom(
809         address from,
810         address to,
811         uint256 tokenId
812     ) external;
813 
814     /**
815      * @dev Transfers `tokenId` token from `from` to `to`.
816      *
817      * WARNING: Usage of this method is discouraged, use {safeTransferFrom} whenever possible.
818      *
819      * Requirements:
820      *
821      * - `from` cannot be the zero address.
822      * - `to` cannot be the zero address.
823      * - `tokenId` token must be owned by `from`.
824      * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.
825      *
826      * Emits a {Transfer} event.
827      */
828     function transferFrom(
829         address from,
830         address to,
831         uint256 tokenId
832     ) external;
833 
834     /**
835      * @dev Gives permission to `to` to transfer `tokenId` token to another account.
836      * The approval is cleared when the token is transferred.
837      *
838      * Only a single account can be approved at a time, so approving the zero address clears previous approvals.
839      *
840      * Requirements:
841      *
842      * - The caller must own the token or be an approved operator.
843      * - `tokenId` must exist.
844      *
845      * Emits an {Approval} event.
846      */
847     function approve(address to, uint256 tokenId) external;
848 
849     /**
850      * @dev Returns the account approved for `tokenId` token.
851      *
852      * Requirements:
853      *
854      * - `tokenId` must exist.
855      */
856     function getApproved(uint256 tokenId) external view returns (address operator);
857 
858     /**
859      * @dev Approve or remove `operator` as an operator for the caller.
860      * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.
861      *
862      * Requirements:
863      *
864      * - The `operator` cannot be the caller.
865      *
866      * Emits an {ApprovalForAll} event.
867      */
868     function setApprovalForAll(address operator, bool _approved) external;
869 
870     /**
871      * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.
872      *
873      * See {setApprovalForAll}
874      */
875     function isApprovedForAll(address owner, address operator) external view returns (bool);
876 
877     /**
878      * @dev Safely transfers `tokenId` token from `from` to `to`.
879      *
880      * Requirements:
881      *
882      * - `from` cannot be the zero address.
883      * - `to` cannot be the zero address.
884      * - `tokenId` token must exist and be owned by `from`.
885      * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.
886      * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.
887      *
888      * Emits a {Transfer} event.
889      */
890     function safeTransferFrom(
891         address from,
892         address to,
893         uint256 tokenId,
894         bytes calldata data
895     ) external;
896 }
897 
898 // File: @openzeppelin/contracts/token/ERC721/extensions/IERC721Metadata.sol
899 
900 
901 // OpenZeppelin Contracts v4.4.1 (token/ERC721/extensions/IERC721Metadata.sol)
902 
903 pragma solidity ^0.8.0;
904 
905 
906 /**
907  * @title ERC-721 Non-Fungible Token Standard, optional metadata extension
908  * @dev See https://eips.ethereum.org/EIPS/eip-721
909  */
910 interface IERC721Metadata is IERC721 {
911     /**
912      * @dev Returns the token collection name.
913      */
914     function name() external view returns (string memory);
915 
916     /**
917      * @dev Returns the token collection symbol.
918      */
919     function symbol() external view returns (string memory);
920 
921     /**
922      * @dev Returns the Uniform Resource Identifier (URI) for `tokenId` token.
923      */
924     function tokenURI(uint256 tokenId) external view returns (string memory);
925 }
926 
927 // File: contracts/ERC721A.sol
928 
929 
930 // Creator: Chiru Labs
931 
932 pragma solidity ^0.8.4;
933 
934 
935 
936 
937 
938 
939 
940 
941 error ApprovalCallerNotOwnerNorApproved();
942 error ApprovalQueryForNonexistentToken();
943 error ApproveToCaller();
944 error ApprovalToCurrentOwner();
945 error BalanceQueryForZeroAddress();
946 error MintToZeroAddress();
947 error MintZeroQuantity();
948 error OwnerQueryForNonexistentToken();
949 error TransferCallerNotOwnerNorApproved();
950 error TransferFromIncorrectOwner();
951 error TransferToNonERC721ReceiverImplementer();
952 error TransferToZeroAddress();
953 error URIQueryForNonexistentToken();
954 
955 /**
956  * @dev Implementation of https://eips.ethereum.org/EIPS/eip-721[ERC721] Non-Fungible Token Standard, including
957  * the Metadata extension. Built to optimize for lower gas during batch mints.
958  *
959  * Assumes serials are sequentially minted starting at _startTokenId() (defaults to 0, e.g. 0, 1, 2, 3..).
960  *
961  * Assumes that an owner cannot have more than 2**64 - 1 (max value of uint64) of supply.
962  *
963  * Assumes that the maximum token id cannot exceed 2**256 - 1 (max value of uint256).
964  */
965 contract ERC721A is Context, ERC165, IERC721, IERC721Metadata {
966     using Address for address;
967     using Strings for uint256;
968 
969     // Compiler will pack this into a single 256bit word.
970     struct TokenOwnership {
971         // The address of the owner.
972         address addr;
973         // Keeps track of the start time of ownership with minimal overhead for tokenomics.
974         uint64 startTimestamp;
975         // Whether the token has been burned.
976         bool burned;
977     }
978 
979     // Compiler will pack this into a single 256bit word.
980     struct AddressData {
981         // Realistically, 2**64-1 is more than enough.
982         uint64 balance;
983         // Keeps track of mint count with minimal overhead for tokenomics.
984         uint64 numberMinted;
985         // Keeps track of burn count with minimal overhead for tokenomics.
986         uint64 numberBurned;
987         // For miscellaneous variable(s) pertaining to the address
988         // (e.g. number of whitelist mint slots used).
989         // If there are multiple variables, please pack them into a uint64.
990         uint64 aux;
991     }
992 
993     // The tokenId of the next token to be minted.
994     uint256 internal _currentIndex;
995 
996     // The number of tokens burned.
997     uint256 internal _burnCounter;
998 
999     // Token name
1000     string private _name;
1001 
1002     // Token symbol
1003     string private _symbol;
1004 
1005     // Mapping from token ID to ownership details
1006     // An empty struct value does not necessarily mean the token is unowned. See _ownershipOf implementation for details.
1007     mapping(uint256 => TokenOwnership) internal _ownerships;
1008 
1009     // Mapping owner address to address data
1010     mapping(address => AddressData) private _addressData;
1011 
1012     // Mapping from token ID to approved address
1013     mapping(uint256 => address) private _tokenApprovals;
1014 
1015     // Mapping from owner to operator approvals
1016     mapping(address => mapping(address => bool)) private _operatorApprovals;
1017 
1018     constructor(string memory name_, string memory symbol_) {
1019         _name = name_;
1020         _symbol = symbol_;
1021         _currentIndex = _startTokenId();
1022     }
1023 
1024     /**
1025      * To change the starting tokenId, please override this function.
1026      */
1027     function _startTokenId() internal view virtual returns (uint256) {
1028         return 1;
1029     }
1030 
1031     /**
1032      * @dev Burned tokens are calculated here, use _totalMinted() if you want to count just minted tokens.
1033      */
1034     function totalSupply() public view returns (uint256) {
1035         // Counter underflow is impossible as _burnCounter cannot be incremented
1036         // more than _currentIndex - _startTokenId() times
1037         unchecked {
1038             return _currentIndex - _burnCounter - _startTokenId();
1039         }
1040     }
1041 
1042     /**
1043      * Returns the total amount of tokens minted in the contract.
1044      */
1045     function _totalMinted() internal view returns (uint256) {
1046         // Counter underflow is impossible as _currentIndex does not decrement,
1047         // and it is initialized to _startTokenId()
1048         unchecked {
1049             return _currentIndex - _startTokenId();
1050         }
1051     }
1052 
1053     /**
1054      * @dev See {IERC165-supportsInterface}.
1055      */
1056     function supportsInterface(bytes4 interfaceId) public view virtual override(ERC165, IERC165) returns (bool) {
1057         return
1058             interfaceId == type(IERC721).interfaceId ||
1059             interfaceId == type(IERC721Metadata).interfaceId ||
1060             super.supportsInterface(interfaceId);
1061     }
1062 
1063     /**
1064      * @dev See {IERC721-balanceOf}.
1065      */
1066     function balanceOf(address owner) public view override returns (uint256) {
1067         if (owner == address(0)) revert BalanceQueryForZeroAddress();
1068         return uint256(_addressData[owner].balance);
1069     }
1070 
1071     /**
1072      * Returns the number of tokens minted by `owner`.
1073      */
1074     function _numberMinted(address owner) internal view returns (uint256) {
1075         return uint256(_addressData[owner].numberMinted);
1076     }
1077 
1078     /**
1079      * Returns the number of tokens burned by or on behalf of `owner`.
1080      */
1081     function _numberBurned(address owner) internal view returns (uint256) {
1082         return uint256(_addressData[owner].numberBurned);
1083     }
1084 
1085     /**
1086      * Returns the auxillary data for `owner`. (e.g. number of whitelist mint slots used).
1087      */
1088     function _getAux(address owner) internal view returns (uint64) {
1089         return _addressData[owner].aux;
1090     }
1091 
1092     /**
1093      * Sets the auxillary data for `owner`. (e.g. number of whitelist mint slots used).
1094      * If there are multiple variables, please pack them into a uint64.
1095      */
1096     function _setAux(address owner, uint64 aux) internal {
1097         _addressData[owner].aux = aux;
1098     }
1099 
1100     /**
1101      * Gas spent here starts off proportional to the maximum mint batch size.
1102      * It gradually moves to O(1) as tokens get transferred around in the collection over time.
1103      */
1104     function _ownershipOf(uint256 tokenId) internal view returns (TokenOwnership memory) {
1105         uint256 curr = tokenId;
1106 
1107         unchecked {
1108             if (_startTokenId() <= curr && curr < _currentIndex) {
1109                 TokenOwnership memory ownership = _ownerships[curr];
1110                 if (!ownership.burned) {
1111                     if (ownership.addr != address(0)) {
1112                         return ownership;
1113                     }
1114                     // Invariant:
1115                     // There will always be an ownership that has an address and is not burned
1116                     // before an ownership that does not have an address and is not burned.
1117                     // Hence, curr will not underflow.
1118                     while (true) {
1119                         curr--;
1120                         ownership = _ownerships[curr];
1121                         if (ownership.addr != address(0)) {
1122                             return ownership;
1123                         }
1124                     }
1125                 }
1126             }
1127         }
1128         revert OwnerQueryForNonexistentToken();
1129     }
1130 
1131     /**
1132      * @dev See {IERC721-ownerOf}.
1133      */
1134     function ownerOf(uint256 tokenId) public view override returns (address) {
1135         return _ownershipOf(tokenId).addr;
1136     }
1137 
1138     /**
1139      * @dev See {IERC721Metadata-name}.
1140      */
1141     function name() public view virtual override returns (string memory) {
1142         return _name;
1143     }
1144 
1145     /**
1146      * @dev See {IERC721Metadata-symbol}.
1147      */
1148     function symbol() public view virtual override returns (string memory) {
1149         return _symbol;
1150     }
1151 
1152     /**
1153      * @dev See {IERC721Metadata-tokenURI}.
1154      */
1155     function tokenURI(uint256 tokenId) public view virtual override returns (string memory) {
1156         if (!_exists(tokenId)) revert URIQueryForNonexistentToken();
1157 
1158         string memory baseURI = _baseURI();
1159         return bytes(baseURI).length != 0 ? string(abi.encodePacked(baseURI, tokenId.toString())) : '';
1160     }
1161 
1162     /**
1163      * @dev Base URI for computing {tokenURI}. If set, the resulting URI for each
1164      * token will be the concatenation of the `baseURI` and the `tokenId`. Empty
1165      * by default, can be overriden in child contracts.
1166      */
1167     function _baseURI() internal view virtual returns (string memory) {
1168         return '';
1169     }
1170 
1171     /**
1172      * @dev See {IERC721-approve}.
1173      */
1174     function approve(address to, uint256 tokenId) public override {
1175         address owner = ERC721A.ownerOf(tokenId);
1176         if (to == owner) revert ApprovalToCurrentOwner();
1177 
1178         if (_msgSender() != owner && !isApprovedForAll(owner, _msgSender())) {
1179             revert ApprovalCallerNotOwnerNorApproved();
1180         }
1181 
1182         _approve(to, tokenId, owner);
1183     }
1184 
1185     /**
1186      * @dev See {IERC721-getApproved}.
1187      */
1188     function getApproved(uint256 tokenId) public view override returns (address) {
1189         if (!_exists(tokenId)) revert ApprovalQueryForNonexistentToken();
1190 
1191         return _tokenApprovals[tokenId];
1192     }
1193 
1194     /**
1195      * @dev See {IERC721-setApprovalForAll}.
1196      */
1197     function setApprovalForAll(address operator, bool approved) public virtual override {
1198         if (operator == _msgSender()) revert ApproveToCaller();
1199 
1200         _operatorApprovals[_msgSender()][operator] = approved;
1201         emit ApprovalForAll(_msgSender(), operator, approved);
1202     }
1203 
1204     /**
1205      * @dev See {IERC721-isApprovedForAll}.
1206      */
1207     function isApprovedForAll(address owner, address operator) public view virtual override returns (bool) {
1208         return _operatorApprovals[owner][operator];
1209     }
1210 
1211     /**
1212      * @dev See {IERC721-transferFrom}.
1213      */
1214     function transferFrom(
1215         address from,
1216         address to,
1217         uint256 tokenId
1218     ) public virtual override {
1219         _transfer(from, to, tokenId);
1220     }
1221 
1222     /**
1223      * @dev See {IERC721-safeTransferFrom}.
1224      */
1225     function safeTransferFrom(
1226         address from,
1227         address to,
1228         uint256 tokenId
1229     ) public virtual override {
1230         safeTransferFrom(from, to, tokenId, '');
1231     }
1232 
1233     /**
1234      * @dev See {IERC721-safeTransferFrom}.
1235      */
1236     function safeTransferFrom(
1237         address from,
1238         address to,
1239         uint256 tokenId,
1240         bytes memory _data
1241     ) public virtual override {
1242         _transfer(from, to, tokenId);
1243         if (to.isContract() && !_checkContractOnERC721Received(from, to, tokenId, _data)) {
1244             revert TransferToNonERC721ReceiverImplementer();
1245         }
1246     }
1247 
1248     /**
1249      * @dev Returns whether `tokenId` exists.
1250      *
1251      * Tokens can be managed by their owner or approved accounts via {approve} or {setApprovalForAll}.
1252      *
1253      * Tokens start existing when they are minted (`_mint`),
1254      */
1255     function _exists(uint256 tokenId) internal view returns (bool) {
1256         return _startTokenId() <= tokenId && tokenId < _currentIndex && !_ownerships[tokenId].burned;
1257     }
1258 
1259     /**
1260      * @dev Equivalent to `_safeMint(to, quantity, '')`.
1261      */
1262     function _safeMint(address to, uint256 quantity) internal {
1263         _safeMint(to, quantity, '');
1264     }
1265 
1266     /**
1267      * @dev Safely mints `quantity` tokens and transfers them to `to`.
1268      *
1269      * Requirements:
1270      *
1271      * - If `to` refers to a smart contract, it must implement 
1272      *   {IERC721Receiver-onERC721Received}, which is called for each safe transfer.
1273      * - `quantity` must be greater than 0.
1274      *
1275      * Emits a {Transfer} event.
1276      */
1277     function _safeMint(
1278         address to,
1279         uint256 quantity,
1280         bytes memory _data
1281     ) internal {
1282         uint256 startTokenId = _currentIndex;
1283         if (to == address(0)) revert MintToZeroAddress();
1284         if (quantity == 0) revert MintZeroQuantity();
1285 
1286         _beforeTokenTransfers(address(0), to, startTokenId, quantity);
1287 
1288         // Overflows are incredibly unrealistic.
1289         // balance or numberMinted overflow if current value of either + quantity > 1.8e19 (2**64) - 1
1290         // updatedIndex overflows if _currentIndex + quantity > 1.2e77 (2**256) - 1
1291         unchecked {
1292             _addressData[to].balance += uint64(quantity);
1293             _addressData[to].numberMinted += uint64(quantity);
1294 
1295             _ownerships[startTokenId].addr = to;
1296             _ownerships[startTokenId].startTimestamp = uint64(block.timestamp);
1297 
1298             uint256 updatedIndex = startTokenId;
1299             uint256 end = updatedIndex + quantity;
1300 
1301             if (to.isContract()) {
1302                 do {
1303                     emit Transfer(address(0), to, updatedIndex);
1304                     if (!_checkContractOnERC721Received(address(0), to, updatedIndex++, _data)) {
1305                         revert TransferToNonERC721ReceiverImplementer();
1306                     }
1307                 } while (updatedIndex != end);
1308                 // Reentrancy protection
1309                 if (_currentIndex != startTokenId) revert();
1310             } else {
1311                 do {
1312                     emit Transfer(address(0), to, updatedIndex++);
1313                 } while (updatedIndex != end);
1314             }
1315             _currentIndex = updatedIndex;
1316         }
1317         _afterTokenTransfers(address(0), to, startTokenId, quantity);
1318     }
1319 
1320     /**
1321      * @dev Mints `quantity` tokens and transfers them to `to`.
1322      *
1323      * Requirements:
1324      *
1325      * - `to` cannot be the zero address.
1326      * - `quantity` must be greater than 0.
1327      *
1328      * Emits a {Transfer} event.
1329      */
1330     function _mint(address to, uint256 quantity) internal {
1331         uint256 startTokenId = _currentIndex;
1332         if (to == address(0)) revert MintToZeroAddress();
1333         if (quantity == 0) revert MintZeroQuantity();
1334 
1335         _beforeTokenTransfers(address(0), to, startTokenId, quantity);
1336 
1337         // Overflows are incredibly unrealistic.
1338         // balance or numberMinted overflow if current value of either + quantity > 1.8e19 (2**64) - 1
1339         // updatedIndex overflows if _currentIndex + quantity > 1.2e77 (2**256) - 1
1340         unchecked {
1341             _addressData[to].balance += uint64(quantity);
1342             _addressData[to].numberMinted += uint64(quantity);
1343 
1344             _ownerships[startTokenId].addr = to;
1345             _ownerships[startTokenId].startTimestamp = uint64(block.timestamp);
1346 
1347             uint256 updatedIndex = startTokenId;
1348             uint256 end = updatedIndex + quantity;
1349 
1350             do {
1351                 emit Transfer(address(0), to, updatedIndex++);
1352             } while (updatedIndex != end);
1353 
1354             _currentIndex = updatedIndex;
1355         }
1356         _afterTokenTransfers(address(0), to, startTokenId, quantity);
1357     }
1358 
1359     /**
1360      * @dev Transfers `tokenId` from `from` to `to`.
1361      *
1362      * Requirements:
1363      *
1364      * - `to` cannot be the zero address.
1365      * - `tokenId` token must be owned by `from`.
1366      *
1367      * Emits a {Transfer} event.
1368      */
1369     function _transfer(
1370         address from,
1371         address to,
1372         uint256 tokenId
1373     ) private {
1374         TokenOwnership memory prevOwnership = _ownershipOf(tokenId);
1375 
1376         if (prevOwnership.addr != from) revert TransferFromIncorrectOwner();
1377 
1378         bool isApprovedOrOwner = (_msgSender() == from ||
1379             isApprovedForAll(from, _msgSender()) ||
1380             getApproved(tokenId) == _msgSender());
1381 
1382         if (!isApprovedOrOwner) revert TransferCallerNotOwnerNorApproved();
1383         if (to == address(0)) revert TransferToZeroAddress();
1384 
1385         _beforeTokenTransfers(from, to, tokenId, 1);
1386 
1387         // Clear approvals from the previous owner
1388         _approve(address(0), tokenId, from);
1389 
1390         // Underflow of the sender's balance is impossible because we check for
1391         // ownership above and the recipient's balance can't realistically overflow.
1392         // Counter overflow is incredibly unrealistic as tokenId would have to be 2**256.
1393         unchecked {
1394             _addressData[from].balance -= 1;
1395             _addressData[to].balance += 1;
1396 
1397             TokenOwnership storage currSlot = _ownerships[tokenId];
1398             currSlot.addr = to;
1399             currSlot.startTimestamp = uint64(block.timestamp);
1400 
1401             // If the ownership slot of tokenId+1 is not explicitly set, that means the transfer initiator owns it.
1402             // Set the slot of tokenId+1 explicitly in storage to maintain correctness for ownerOf(tokenId+1) calls.
1403             uint256 nextTokenId = tokenId + 1;
1404             TokenOwnership storage nextSlot = _ownerships[nextTokenId];
1405             if (nextSlot.addr == address(0)) {
1406                 // This will suffice for checking _exists(nextTokenId),
1407                 // as a burned slot cannot contain the zero address.
1408                 if (nextTokenId != _currentIndex) {
1409                     nextSlot.addr = from;
1410                     nextSlot.startTimestamp = prevOwnership.startTimestamp;
1411                 }
1412             }
1413         }
1414 
1415         emit Transfer(from, to, tokenId);
1416         _afterTokenTransfers(from, to, tokenId, 1);
1417     }
1418 
1419     /**
1420      * @dev Equivalent to `_burn(tokenId, false)`.
1421      */
1422     function _burn(uint256 tokenId) internal virtual {
1423         _burn(tokenId, false);
1424     }
1425 
1426     /**
1427      * @dev Destroys `tokenId`.
1428      * The approval is cleared when the token is burned.
1429      *
1430      * Requirements:
1431      *
1432      * - `tokenId` must exist.
1433      *
1434      * Emits a {Transfer} event.
1435      */
1436     function _burn(uint256 tokenId, bool approvalCheck) internal virtual {
1437         TokenOwnership memory prevOwnership = _ownershipOf(tokenId);
1438 
1439         address from = prevOwnership.addr;
1440 
1441         if (approvalCheck) {
1442             bool isApprovedOrOwner = (_msgSender() == from ||
1443                 isApprovedForAll(from, _msgSender()) ||
1444                 getApproved(tokenId) == _msgSender());
1445 
1446             if (!isApprovedOrOwner) revert TransferCallerNotOwnerNorApproved();
1447         }
1448 
1449         _beforeTokenTransfers(from, address(0), tokenId, 1);
1450 
1451         // Clear approvals from the previous owner
1452         _approve(address(0), tokenId, from);
1453 
1454         // Underflow of the sender's balance is impossible because we check for
1455         // ownership above and the recipient's balance can't realistically overflow.
1456         // Counter overflow is incredibly unrealistic as tokenId would have to be 2**256.
1457         unchecked {
1458             AddressData storage addressData = _addressData[from];
1459             addressData.balance -= 1;
1460             addressData.numberBurned += 1;
1461 
1462             // Keep track of who burned the token, and the timestamp of burning.
1463             TokenOwnership storage currSlot = _ownerships[tokenId];
1464             currSlot.addr = from;
1465             currSlot.startTimestamp = uint64(block.timestamp);
1466             currSlot.burned = true;
1467 
1468             // If the ownership slot of tokenId+1 is not explicitly set, that means the burn initiator owns it.
1469             // Set the slot of tokenId+1 explicitly in storage to maintain correctness for ownerOf(tokenId+1) calls.
1470             uint256 nextTokenId = tokenId + 1;
1471             TokenOwnership storage nextSlot = _ownerships[nextTokenId];
1472             if (nextSlot.addr == address(0)) {
1473                 // This will suffice for checking _exists(nextTokenId),
1474                 // as a burned slot cannot contain the zero address.
1475                 if (nextTokenId != _currentIndex) {
1476                     nextSlot.addr = from;
1477                     nextSlot.startTimestamp = prevOwnership.startTimestamp;
1478                 }
1479             }
1480         }
1481 
1482         emit Transfer(from, address(0), tokenId);
1483         _afterTokenTransfers(from, address(0), tokenId, 1);
1484 
1485         // Overflow not possible, as _burnCounter cannot be exceed _currentIndex times.
1486         unchecked {
1487             _burnCounter++;
1488         }
1489     }
1490 
1491     /**
1492      * @dev Approve `to` to operate on `tokenId`
1493      *
1494      * Emits a {Approval} event.
1495      */
1496     function _approve(
1497         address to,
1498         uint256 tokenId,
1499         address owner
1500     ) private {
1501         _tokenApprovals[tokenId] = to;
1502         emit Approval(owner, to, tokenId);
1503     }
1504 
1505     /**
1506      * @dev Internal function to invoke {IERC721Receiver-onERC721Received} on a target contract.
1507      *
1508      * @param from address representing the previous owner of the given token ID
1509      * @param to target address that will receive the tokens
1510      * @param tokenId uint256 ID of the token to be transferred
1511      * @param _data bytes optional data to send along with the call
1512      * @return bool whether the call correctly returned the expected magic value
1513      */
1514     function _checkContractOnERC721Received(
1515         address from,
1516         address to,
1517         uint256 tokenId,
1518         bytes memory _data
1519     ) private returns (bool) {
1520         try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, _data) returns (bytes4 retval) {
1521             return retval == IERC721Receiver(to).onERC721Received.selector;
1522         } catch (bytes memory reason) {
1523             if (reason.length == 0) {
1524                 revert TransferToNonERC721ReceiverImplementer();
1525             } else {
1526                 assembly {
1527                     revert(add(32, reason), mload(reason))
1528                 }
1529             }
1530         }
1531     }
1532 
1533     /**
1534      * @dev Hook that is called before a set of serially-ordered token ids are about to be transferred. This includes minting.
1535      * And also called before burning one token.
1536      *
1537      * startTokenId - the first token id to be transferred
1538      * quantity - the amount to be transferred
1539      *
1540      * Calling conditions:
1541      *
1542      * - When `from` and `to` are both non-zero, `from`'s `tokenId` will be
1543      * transferred to `to`.
1544      * - When `from` is zero, `tokenId` will be minted for `to`.
1545      * - When `to` is zero, `tokenId` will be burned by `from`.
1546      * - `from` and `to` are never both zero.
1547      */
1548     function _beforeTokenTransfers(
1549         address from,
1550         address to,
1551         uint256 startTokenId,
1552         uint256 quantity
1553     ) internal virtual {}
1554 
1555     /**
1556      * @dev Hook that is called after a set of serially-ordered token ids have been transferred. This includes
1557      * minting.
1558      * And also called after one token has been burned.
1559      *
1560      * startTokenId - the first token id to be transferred
1561      * quantity - the amount to be transferred
1562      *
1563      * Calling conditions:
1564      *
1565      * - When `from` and `to` are both non-zero, `from`'s `tokenId` has been
1566      * transferred to `to`.
1567      * - When `from` is zero, `tokenId` has been minted for `to`.
1568      * - When `to` is zero, `tokenId` has been burned by `from`.
1569      * - `from` and `to` are never both zero.
1570      */
1571     function _afterTokenTransfers(
1572         address from,
1573         address to,
1574         uint256 startTokenId,
1575         uint256 quantity
1576     ) internal virtual {}
1577 }
1578 // File: contracts/GossamerGods.sol
1579 
1580 
1581 
1582 pragma solidity ^0.8.0;
1583 
1584 
1585 
1586 
1587 
1588 contract DEGENERATIVES is ERC721A, Ownable, ReentrancyGuard {
1589   using Address for address;
1590   using Strings for uint;
1591 
1592 
1593   string  public  baseTokenURI = "ipfs://QmbiL3JnsQvZZzKehiSJmaVjwrQ1Ycr8vX38Ft6LBPoJC2//";
1594   uint256  public  maxSupply = 340;
1595   uint256 public  MAX_MINTS_PER_TX = 5;
1596   uint256 public  PUBLIC_SALE_PRICE = 0.01 ether;
1597   uint256 public  NUM_FREE_MINTS = 100;
1598   uint256 public  MAX_FREE_PER_WALLET = 1;
1599   uint256 public freeNFTAlreadyMinted = 0;
1600   bool public isPublicSaleActive = true;
1601 
1602   constructor() ERC721A("DEGENERATIVES", "DGR") {
1603   }
1604 
1605 
1606   function mint(uint256 numberOfTokens)
1607       external
1608       payable
1609   {
1610     require(isPublicSaleActive, "Sale is not open");
1611     require(totalSupply() + numberOfTokens < maxSupply + 1, "No more left");
1612 
1613     if(freeNFTAlreadyMinted + numberOfTokens > NUM_FREE_MINTS){
1614         require(
1615             (PUBLIC_SALE_PRICE * numberOfTokens) <= msg.value,
1616             "Incorrect ETH value sent"
1617         );
1618     } else {
1619         if (balanceOf(msg.sender) + numberOfTokens > MAX_FREE_PER_WALLET) {
1620         require(
1621             (PUBLIC_SALE_PRICE * numberOfTokens) <= msg.value,
1622             "Incorrect ETH value sent"
1623         );
1624         require(
1625             numberOfTokens <= MAX_MINTS_PER_TX,
1626             "Max mints per transaction exceeded"
1627         );
1628         } else {
1629             require(
1630                 numberOfTokens <= MAX_FREE_PER_WALLET,
1631                 "Max mints per transaction exceeded"
1632             );
1633             freeNFTAlreadyMinted += numberOfTokens;
1634         }
1635     }
1636     _safeMint(msg.sender, numberOfTokens);
1637   }
1638 
1639   function setBaseURI(string memory baseURI)
1640     public
1641     onlyOwner
1642   {
1643     baseTokenURI = baseURI;
1644   }
1645 
1646   function treasuryMint(uint quantity)
1647     public
1648     onlyOwner
1649   {
1650     require(
1651       quantity > 0,
1652       "Invalid mint amount"
1653     );
1654     require(
1655       totalSupply() + quantity <= maxSupply,
1656       "Maximum supply exceeded"
1657     );
1658     _safeMint(msg.sender, quantity);
1659   }
1660 
1661   function withdraw()
1662     public
1663     onlyOwner
1664     nonReentrant
1665   {
1666     Address.sendValue(payable(msg.sender), address(this).balance);
1667   }
1668 
1669   function tokenURI(uint _tokenId)
1670     public
1671     view
1672     virtual
1673     override
1674     returns (string memory)
1675   {
1676     require(
1677       _exists(_tokenId),
1678       "ERC721Metadata: URI query for nonexistent token"
1679     );
1680     return string(abi.encodePacked(baseTokenURI, "/", _tokenId.toString(), ".json"));
1681   }
1682 
1683   function _baseURI()
1684     internal
1685     view
1686     virtual
1687     override
1688     returns (string memory)
1689   {
1690     return baseTokenURI;
1691   }
1692 
1693   function setIsPublicSaleActive(bool _isPublicSaleActive)
1694       external
1695       onlyOwner
1696   {
1697       isPublicSaleActive = _isPublicSaleActive;
1698   }
1699 
1700   function setNumFreeMints(uint256 _numfreemints)
1701       external
1702       onlyOwner
1703   {
1704       NUM_FREE_MINTS = _numfreemints;
1705   }
1706 
1707   function setSalePrice(uint256 _price)
1708       external
1709       onlyOwner
1710   {
1711       PUBLIC_SALE_PRICE = _price;
1712   }
1713 
1714   function setMaxLimitPerTransaction(uint256 _limit)
1715       external
1716       onlyOwner
1717   {
1718       MAX_MINTS_PER_TX = _limit;
1719   }
1720 
1721   function setFreeLimitPerWallet(uint256 _limit)
1722       external
1723       onlyOwner
1724   {
1725       MAX_FREE_PER_WALLET = _limit;
1726   }
1727 }