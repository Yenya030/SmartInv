The contract you provided may have the following potential vulnerabilities: 

1) inconsistent state update
2) insufficient gas