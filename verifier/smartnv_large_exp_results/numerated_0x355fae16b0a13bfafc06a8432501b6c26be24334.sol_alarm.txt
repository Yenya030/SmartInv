Potential vulnerabilities in the following contract: 

1) atomicity violation
2) inconsistent state update